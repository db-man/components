{"version":3,"file":"ddRender.js","names":["constants","ddRenderFnMapping","defaultRenders","NUMBER","val","STRING","STRING_ARRAY","join","BOOL","undefined","String","getRender","args","tplExtra","renderFn","fn","Array","isArray","renderFnName","record","index","getColumnRender","renderKey","column","customRender","type","getRenderResultByColumn","value"],"sources":["../../src/ddRender/ddRender.ts"],"sourcesContent":["// @ts-nocheck\n\nimport * as constants from '../constants';\nimport ddRenderFnMapping from './ddRenderFnMapping';\n\n// Default render func when \"type:listPage\" or \"type:getPage\" not defined in db table column\nconst defaultRenders = {\n  [constants.NUMBER]: (val) => val,\n  [constants.STRING]: (val) => val,\n  [constants.STRING_ARRAY]: (val) => val && val.join(', '),\n  [constants.BOOL]: (val) => (val === undefined ? '' : String(val)),\n};\n\n/**\n * @param {string|string[]} args\n * @param {Object} tplExtra\n */\nexport const getRender = (args, tplExtra) => {\n  // the column render function defined in Table component of antd\n  // renderFn = (val, record, index) => ()\n  let renderFn;\n\n  if (!args) {\n    return renderFn;\n  }\n\n  if (typeof args === 'string') {\n    const fn = ddRenderFnMapping[args];\n    if (fn) {\n      renderFn = fn;\n    }\n  }\n\n  if (Array.isArray(args)) {\n    const [renderFnName] = args;\n    renderFn = (val, record, index) =>\n      ddRenderFnMapping[renderFnName](val, record, index, args, tplExtra);\n  }\n\n  return renderFn;\n};\n\n/**\n * column def:\n * {\n *   \"type:listPage\": [\"Link\", \"{{record.url}}\"]\n * }\n */\nexport const getColumnRender = (renderKey, column, tplExtra?) => {\n  const customRender = getRender(column[renderKey], tplExtra);\n  if (customRender) {\n    return customRender;\n  }\n\n  // the column render function defined in Table component of antd\n  // renderFn = (val, record, index) => ()\n  return defaultRenders[column.type || constants.STRING];\n};\n\nexport const getRenderResultByColumn = (value, record, index, args, column) =>\n  getColumnRender('type:listPage', column)(value, record, index); // eslint-disable-line max-len\n"],"mappings":"AAAA;;AAEA,OAAO,KAAKA,SAAS,MAAM,cAAc;AACzC,OAAOC,iBAAiB,MAAM,qBAAqB;;AAEnD;AACA,MAAMC,cAAc,GAAG;EACrB,CAACF,SAAS,CAACG,MAAM,GAAIC,GAAG,IAAKA,GAAG;EAChC,CAACJ,SAAS,CAACK,MAAM,GAAID,GAAG,IAAKA,GAAG;EAChC,CAACJ,SAAS,CAACM,YAAY,GAAIF,GAAG,IAAKA,GAAG,IAAIA,GAAG,CAACG,IAAI,CAAC,IAAI,CAAC;EACxD,CAACP,SAAS,CAACQ,IAAI,GAAIJ,GAAG,IAAMA,GAAG,KAAKK,SAAS,GAAG,EAAE,GAAGC,MAAM,CAACN,GAAG;AACjE,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMO,SAAS,GAAGA,CAACC,IAAI,EAAEC,QAAQ,KAAK;EAC3C;EACA;EACA,IAAIC,QAAQ;EAEZ,IAAI,CAACF,IAAI,EAAE;IACT,OAAOE,QAAQ;EACjB;EAEA,IAAI,OAAOF,IAAI,KAAK,QAAQ,EAAE;IAC5B,MAAMG,EAAE,GAAGd,iBAAiB,CAACW,IAAI,CAAC;IAClC,IAAIG,EAAE,EAAE;MACND,QAAQ,GAAGC,EAAE;IACf;EACF;EAEA,IAAIC,KAAK,CAACC,OAAO,CAACL,IAAI,CAAC,EAAE;IACvB,MAAM,CAACM,YAAY,CAAC,GAAGN,IAAI;IAC3BE,QAAQ,GAAGA,CAACV,GAAG,EAAEe,MAAM,EAAEC,KAAK,KAC5BnB,iBAAiB,CAACiB,YAAY,CAAC,CAACd,GAAG,EAAEe,MAAM,EAAEC,KAAK,EAAER,IAAI,EAAEC,QAAQ,CAAC;EACvE;EAEA,OAAOC,QAAQ;AACjB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMO,eAAe,GAAGA,CAACC,SAAS,EAAEC,MAAM,EAAEV,QAAS,KAAK;EAC/D,MAAMW,YAAY,GAAGb,SAAS,CAACY,MAAM,CAACD,SAAS,CAAC,EAAET,QAAQ,CAAC;EAC3D,IAAIW,YAAY,EAAE;IAChB,OAAOA,YAAY;EACrB;;EAEA;EACA;EACA,OAAOtB,cAAc,CAACqB,MAAM,CAACE,IAAI,IAAIzB,SAAS,CAACK,MAAM,CAAC;AACxD,CAAC;AAED,OAAO,MAAMqB,uBAAuB,GAAGA,CAACC,KAAK,EAAER,MAAM,EAAEC,KAAK,EAAER,IAAI,EAAEW,MAAM,KACxEF,eAAe,CAAC,eAAe,EAAEE,MAAM,CAAC,CAACI,KAAK,EAAER,MAAM,EAAEC,KAAK,CAAC,CAAC,CAAC"}