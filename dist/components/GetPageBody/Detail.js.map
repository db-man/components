{"version":3,"file":"Detail.js","names":["React","PropTypes","Input","Collapse","PageContext","constants","ddRender","FieldWrapperForDetailPage","StringFormFieldValue","Panel","Detail","Component","constructor","args","_defineProperty","column","value","renderFn","getColumnRender","tables","context","rows","props","refTables","referenceTable","el","defaultValues","createElement","id","renderWithDdRender","preview","key","inputProps","readOnly","type","STRING","renderStringFieldValue","BOOL","NUMBER","STRING_ARRAY","debugJson","JSON","stringify","header","TextArea","style","fontSize","split","length","render","columns","className","map","renderFieldValue","renderDebugJson","propTypes","object","isRequired","defaultProps","contextType"],"sources":["../../../src/components/GetPageBody/Detail.tsx"],"sourcesContent":["// @ts-nocheck\n\n/* eslint-disable react/destructuring-assignment, no-console, max-len */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { Input, Collapse } from 'antd';\n\nimport PageContext from '../../contexts/page';\nimport * as constants from '../../constants';\nimport * as ddRender from '../../ddRender/ddRender';\nimport FieldWrapperForDetailPage from '../FieldWrapperForDetailPage';\nimport StringFormFieldValue from '../StringFormFieldValue';\n\nconst { Panel } = Collapse;\n\nexport default class Detail extends React.Component {\n  renderWithDdRender = (column, value) => {\n    const renderFn = ddRender.getColumnRender('type:getPage', column, {\n      column,\n      tables: this.context.tables,\n      rows: this.props.refTables[`ref:${column.referenceTable}:rows`], // eslint-disable-line react/prop-types\n    });\n    if (renderFn) {\n      const el = renderFn(value, this.props.defaultValues);\n      if (el) {\n        return el;\n      }\n    }\n    return <div>No render fn: {value}</div>;\n  };\n\n  renderStringFieldValue = (column) => {\n    const value = this.props.defaultValues[column.id];\n\n    if (column['type:getPage']) {\n      return this.renderWithDdRender(column, value);\n    }\n\n    let preview = false;\n    if (column['type:getPage'] === 'WithPreview') {\n      preview = true;\n    }\n    return (\n      <StringFormFieldValue\n        key={column.id}\n        inputProps={{\n          readOnly: true,\n        }}\n        preview={preview}\n        value={value}\n      />\n    );\n  };\n\n  renderFieldValue = (column) => {\n    switch (column.type) {\n      case constants.STRING:\n        return this.renderStringFieldValue(column);\n      case constants.BOOL:\n      case constants.NUMBER:\n      case constants.STRING_ARRAY:\n      default:\n        return this.renderWithDdRender(\n          column,\n          this.props.defaultValues[column.id],\n        );\n    }\n  };\n\n  renderDebugJson = () => {\n    const debugJson = JSON.stringify(this.props.defaultValues, null, '  ');\n    return (\n      <Collapse>\n        <Panel header=\"Debug JSON\" key=\"1\">\n          <Input.TextArea\n            style={{ fontSize: '10px' }}\n            rows={debugJson.split('\\n').length}\n            value={debugJson}\n          />\n        </Panel>\n      </Collapse>\n    );\n  };\n\n  render() {\n    const { columns } = this.context;\n\n    return (\n      <div className=\"get-page-body-detail-component\">\n        <div>\n          {columns.map((column) => (\n            <FieldWrapperForDetailPage\n              key={column.id}\n              column={column}\n              value={this.props.defaultValues[column.id]}\n            >\n              {this.renderFieldValue(column)}\n            </FieldWrapperForDetailPage>\n          ))}\n        </div>\n        {this.renderDebugJson()}\n      </div>\n    );\n  }\n}\n\nDetail.propTypes = {\n  defaultValues: PropTypes.object.isRequired, // eslint-disable-line react/forbid-prop-types\n};\n\nDetail.defaultProps = {};\n\nDetail.contextType = PageContext;\n"],"mappings":";;;AAAA;;AAEA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,KAAK,EAAEC,QAAQ,QAAQ,MAAM;AAEtC,OAAOC,WAAW,MAAM,qBAAqB;AAC7C,OAAO,KAAKC,SAAS,MAAM,iBAAiB;AAC5C,OAAO,KAAKC,QAAQ,MAAM,yBAAyB;AACnD,OAAOC,yBAAyB,MAAM,8BAA8B;AACpE,OAAOC,oBAAoB,MAAM,yBAAyB;AAE1D,MAAM;EAAEC;AAAM,CAAC,GAAGN,QAAQ;AAE1B,eAAe,MAAMO,MAAM,SAASV,KAAK,CAACW,SAAS,CAAC;EAAAC,YAAA,GAAAC,IAAA;IAAA,SAAAA,IAAA;IAAAC,eAAA,6BAC7B,CAACC,MAAM,EAAEC,KAAK,KAAK;MACtC,MAAMC,QAAQ,GAAGX,QAAQ,CAACY,eAAe,CAAC,cAAc,EAAEH,MAAM,EAAE;QAChEA,MAAM;QACNI,MAAM,EAAE,IAAI,CAACC,OAAO,CAACD,MAAM;QAC3BE,IAAI,EAAE,IAAI,CAACC,KAAK,CAACC,SAAS,CAAE,OAAMR,MAAM,CAACS,cAAe,OAAM,CAAC,CAAE;MACnE,CAAC,CAAC;;MACF,IAAIP,QAAQ,EAAE;QACZ,MAAMQ,EAAE,GAAGR,QAAQ,CAACD,KAAK,EAAE,IAAI,CAACM,KAAK,CAACI,aAAa,CAAC;QACpD,IAAID,EAAE,EAAE;UACN,OAAOA,EAAE;QACX;MACF;MACA,oBAAOzB,KAAA,CAAA2B,aAAA,cAAK,gBAAc,EAACX,KAAW,CAAC;IACzC,CAAC;IAAAF,eAAA,iCAEyBC,MAAM,IAAK;MACnC,MAAMC,KAAK,GAAG,IAAI,CAACM,KAAK,CAACI,aAAa,CAACX,MAAM,CAACa,EAAE,CAAC;MAEjD,IAAIb,MAAM,CAAC,cAAc,CAAC,EAAE;QAC1B,OAAO,IAAI,CAACc,kBAAkB,CAACd,MAAM,EAAEC,KAAK,CAAC;MAC/C;MAEA,IAAIc,OAAO,GAAG,KAAK;MACnB,IAAIf,MAAM,CAAC,cAAc,CAAC,KAAK,aAAa,EAAE;QAC5Ce,OAAO,GAAG,IAAI;MAChB;MACA,oBACE9B,KAAA,CAAA2B,aAAA,CAACnB,oBAAoB;QACnBuB,GAAG,EAAEhB,MAAM,CAACa,EAAG;QACfI,UAAU,EAAE;UACVC,QAAQ,EAAE;QACZ,CAAE;QACFH,OAAO,EAAEA,OAAQ;QACjBd,KAAK,EAAEA;MAAM,CACd,CAAC;IAEN,CAAC;IAAAF,eAAA,2BAEmBC,MAAM,IAAK;MAC7B,QAAQA,MAAM,CAACmB,IAAI;QACjB,KAAK7B,SAAS,CAAC8B,MAAM;UACnB,OAAO,IAAI,CAACC,sBAAsB,CAACrB,MAAM,CAAC;QAC5C,KAAKV,SAAS,CAACgC,IAAI;QACnB,KAAKhC,SAAS,CAACiC,MAAM;QACrB,KAAKjC,SAAS,CAACkC,YAAY;QAC3B;UACE,OAAO,IAAI,CAACV,kBAAkB,CAC5Bd,MAAM,EACN,IAAI,CAACO,KAAK,CAACI,aAAa,CAACX,MAAM,CAACa,EAAE,CACpC,CAAC;MACL;IACF,CAAC;IAAAd,eAAA,0BAEiB,MAAM;MACtB,MAAM0B,SAAS,GAAGC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACpB,KAAK,CAACI,aAAa,EAAE,IAAI,EAAE,IAAI,CAAC;MACtE,oBACE1B,KAAA,CAAA2B,aAAA,CAACxB,QAAQ,qBACPH,KAAA,CAAA2B,aAAA,CAAClB,KAAK;QAACkC,MAAM,EAAC,YAAY;QAACZ,GAAG,EAAC;MAAG,gBAChC/B,KAAA,CAAA2B,aAAA,CAACzB,KAAK,CAAC0C,QAAQ;QACbC,KAAK,EAAE;UAAEC,QAAQ,EAAE;QAAO,CAAE;QAC5BzB,IAAI,EAAEmB,SAAS,CAACO,KAAK,CAAC,IAAI,CAAC,CAACC,MAAO;QACnChC,KAAK,EAAEwB;MAAU,CAClB,CACI,CACC,CAAC;IAEf,CAAC;EAAA;EAEDS,MAAMA,CAAA,EAAG;IACP,MAAM;MAAEC;IAAQ,CAAC,GAAG,IAAI,CAAC9B,OAAO;IAEhC,oBACEpB,KAAA,CAAA2B,aAAA;MAAKwB,SAAS,EAAC;IAAgC,gBAC7CnD,KAAA,CAAA2B,aAAA,cACGuB,OAAO,CAACE,GAAG,CAAErC,MAAM,iBAClBf,KAAA,CAAA2B,aAAA,CAACpB,yBAAyB;MACxBwB,GAAG,EAAEhB,MAAM,CAACa,EAAG;MACfb,MAAM,EAAEA,MAAO;MACfC,KAAK,EAAE,IAAI,CAACM,KAAK,CAACI,aAAa,CAACX,MAAM,CAACa,EAAE;IAAE,GAE1C,IAAI,CAACyB,gBAAgB,CAACtC,MAAM,CACJ,CAC5B,CACE,CAAC,EACL,IAAI,CAACuC,eAAe,CAAC,CACnB,CAAC;EAEV;AACF;AAEA5C,MAAM,CAAC6C,SAAS,GAAG;EACjB7B,aAAa,EAAEzB,SAAS,CAACuD,MAAM,CAACC,UAAU,CAAE;AAC9C,CAAC;;AAED/C,MAAM,CAACgD,YAAY,GAAG,CAAC,CAAC;AAExBhD,MAAM,CAACiD,WAAW,GAAGvD,WAAW"}