{"version":3,"file":"StringFormField.js","names":["React","useContext","PropTypes","Alert","columnType","StringFormFieldValue","RefTableLink","PageContext","PresetsButtons","useAppContext","StringFormField","props","label","column","value","inputProps","preview","onChange","dbs","dbName","renderWarning","createElement","message","type","className","tables","propTypes","string","isRequired","bool","shape","disabled","autoFocus","onKeyDown","func","defaultProps"],"sources":["../../src/components/StringFormField.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert } from 'antd';\n\nimport { columnType } from './types';\nimport StringFormFieldValue, { InputProps } from './StringFormFieldValue';\nimport RefTableLink from './RefTableLink';\nimport PageContext from '../contexts/page';\nimport PresetsButtons from './PresetsButtons';\nimport Column from '../types/Column';\nimport { useAppContext } from '../contexts/AppContext';\n\ninterface StringFormFieldProps {\n  label: string;\n  column: Column;\n  dbName: string;\n  primaryKey: string;\n  value?: string;\n  inputProps?: InputProps;\n  preview?: boolean;\n  onChange: (value: string) => void;\n}\n\nexport default function StringFormField(props: StringFormFieldProps) {\n  const { label, column, value, inputProps, preview, onChange } = props;\n  const { dbs } = useAppContext();\n  const { dbName } = useContext(PageContext);\n  const renderWarning = () => {\n    if (typeof value === 'string') return null;\n    return (\n      <Alert\n        message={`(This form field type should be string, but current type is ${typeof value})`}\n        type='warning'\n      />\n    );\n  };\n  return (\n    <div className='dm-form-field dm-string-form-field'>\n      <b>{label}</b>: <PresetsButtons column={column} onChange={onChange} />{' '}\n      <RefTableLink\n        column={column}\n        tables={dbs[dbName]}\n        dbName={dbName}\n        value={value}\n      />\n      {renderWarning()}\n      <StringFormFieldValue\n        inputProps={inputProps}\n        preview={preview}\n        value={value}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nStringFormField.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string,\n  preview: PropTypes.bool,\n  column: columnType.isRequired,\n  inputProps: PropTypes.shape({\n    disabled: PropTypes.bool,\n    autoFocus: PropTypes.bool,\n    onKeyDown: PropTypes.func,\n  }),\n  onChange: PropTypes.func.isRequired,\n};\n\nStringFormField.defaultProps = {\n  value: '',\n  preview: false,\n  // Props to pass directly to antd's Input component\n  inputProps: {\n    // disabled\n    // autoFocus\n    // onKeyDown\n  },\n};\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,KAAK,QAAQ,MAAM;AAE5B,SAASC,UAAU,QAAQ,SAAS;AACpC,OAAOC,oBAAoB,MAAsB,wBAAwB;AACzE,OAAOC,YAAY,MAAM,gBAAgB;AACzC,OAAOC,WAAW,MAAM,kBAAkB;AAC1C,OAAOC,cAAc,MAAM,kBAAkB;AAE7C,SAASC,aAAa,QAAQ,wBAAwB;AAatD,eAAe,SAASC,eAAeA,CAACC,KAA2B,EAAE;EACnE,MAAM;IAAEC,KAAK;IAAEC,MAAM;IAAEC,KAAK;IAAEC,UAAU;IAAEC,OAAO;IAAEC;EAAS,CAAC,GAAGN,KAAK;EACrE,MAAM;IAAEO;EAAI,CAAC,GAAGT,aAAa,CAAC,CAAC;EAC/B,MAAM;IAAEU;EAAO,CAAC,GAAGlB,UAAU,CAACM,WAAW,CAAC;EAC1C,MAAMa,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI,OAAON,KAAK,KAAK,QAAQ,EAAE,OAAO,IAAI;IAC1C,oBACEd,KAAA,CAAAqB,aAAA,CAAClB,KAAK;MACJmB,OAAO,EAAG,+DAA8D,OAAOR,KAAM,GAAG;MACxFS,IAAI,EAAC;IAAS,CACf,CAAC;EAEN,CAAC;EACD,oBACEvB,KAAA,CAAAqB,aAAA;IAAKG,SAAS,EAAC;EAAoC,gBACjDxB,KAAA,CAAAqB,aAAA,YAAIT,KAAS,CAAC,MAAE,eAAAZ,KAAA,CAAAqB,aAAA,CAACb,cAAc;IAACK,MAAM,EAAEA,MAAO;IAACI,QAAQ,EAAEA;EAAS,CAAE,CAAC,EAAC,GAAG,eAC1EjB,KAAA,CAAAqB,aAAA,CAACf,YAAY;IACXO,MAAM,EAAEA,MAAO;IACfY,MAAM,EAAEP,GAAG,CAACC,MAAM,CAAE;IACpBA,MAAM,EAAEA,MAAO;IACfL,KAAK,EAAEA;EAAM,CACd,CAAC,EACDM,aAAa,CAAC,CAAC,eAChBpB,KAAA,CAAAqB,aAAA,CAAChB,oBAAoB;IACnBU,UAAU,EAAEA,UAAW;IACvBC,OAAO,EAAEA,OAAQ;IACjBF,KAAK,EAAEA,KAAM;IACbG,QAAQ,EAAEA;EAAS,CACpB,CACE,CAAC;AAEV;AAEAP,eAAe,CAACgB,SAAS,GAAG;EAC1Bd,KAAK,EAAEV,SAAS,CAACyB,MAAM,CAACC,UAAU;EAClCd,KAAK,EAAEZ,SAAS,CAACyB,MAAM;EACvBX,OAAO,EAAEd,SAAS,CAAC2B,IAAI;EACvBhB,MAAM,EAAET,UAAU,CAACwB,UAAU;EAC7Bb,UAAU,EAAEb,SAAS,CAAC4B,KAAK,CAAC;IAC1BC,QAAQ,EAAE7B,SAAS,CAAC2B,IAAI;IACxBG,SAAS,EAAE9B,SAAS,CAAC2B,IAAI;IACzBI,SAAS,EAAE/B,SAAS,CAACgC;EACvB,CAAC,CAAC;EACFjB,QAAQ,EAAEf,SAAS,CAACgC,IAAI,CAACN;AAC3B,CAAC;AAEDlB,eAAe,CAACyB,YAAY,GAAG;EAC7BrB,KAAK,EAAE,EAAE;EACTE,OAAO,EAAE,KAAK;EACd;EACAD,UAAU,EAAE;IACV;IACA;IACA;EAAA;AAEJ,CAAC"}