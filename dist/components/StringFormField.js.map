{"version":3,"file":"StringFormField.js","names":["React","useContext","PropTypes","Alert","columnType","StringFormFieldValue","RefTableLink","PageContext","dbs","PresetsButtons","StringFormField","props","label","column","value","inputProps","preview","onChange","dbName","renderWarning","createElement","message","type","className","tables","propTypes","string","isRequired","bool","shape","disabled","autoFocus","onKeyDown","func","defaultProps"],"sources":["../../src/components/StringFormField.tsx"],"sourcesContent":["import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { Alert } from 'antd';\n\nimport { columnType } from './types';\nimport StringFormFieldValue, { InputProps } from './StringFormFieldValue';\nimport RefTableLink from './RefTableLink';\nimport PageContext from '../contexts/page';\nimport { dbs } from '../dbs';\nimport PresetsButtons from './PresetsButtons';\nimport Column from '../types/Column';\n\ninterface StringFormFieldProps {\n  label: string;\n  column: Column;\n  dbName: string;\n  primaryKey: string;\n  value?: string;\n  inputProps?: InputProps;\n  preview?: boolean;\n  onChange: (value: string) => void;\n}\n\nexport default function StringFormField(props: StringFormFieldProps) {\n  const { label, column, value, inputProps, preview, onChange } = props;\n  const { dbName } = useContext(PageContext);\n  const renderWarning = () => {\n    if (typeof value === 'string') return null;\n    return (\n      <Alert\n        message={`(This form field type should be string, but current type is ${typeof value})`}\n        type='warning'\n      />\n    );\n  };\n  return (\n    <div className='dm-form-field dm-string-form-field'>\n      <b>{label}</b>: <PresetsButtons column={column} onChange={onChange} />{' '}\n      <RefTableLink\n        column={column}\n        tables={dbs[dbName]}\n        dbName={dbName}\n        value={value}\n      />\n      {renderWarning()}\n      <StringFormFieldValue\n        inputProps={inputProps}\n        preview={preview}\n        value={value}\n        onChange={onChange}\n      />\n    </div>\n  );\n}\n\nStringFormField.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.string,\n  preview: PropTypes.bool,\n  column: columnType.isRequired,\n  inputProps: PropTypes.shape({\n    disabled: PropTypes.bool,\n    autoFocus: PropTypes.bool,\n    onKeyDown: PropTypes.func,\n  }),\n  onChange: PropTypes.func.isRequired,\n};\n\nStringFormField.defaultProps = {\n  value: '',\n  preview: false,\n  // Props to pass directly to antd's Input component\n  inputProps: {\n    // disabled\n    // autoFocus\n    // onKeyDown\n  },\n};\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,KAAK,QAAQ,MAAM;AAE5B,SAASC,UAAU,QAAQ,SAAS;AACpC,OAAOC,oBAAoB,MAAsB,wBAAwB;AACzE,OAAOC,YAAY,MAAM,gBAAgB;AACzC,OAAOC,WAAW,MAAM,kBAAkB;AAC1C,SAASC,GAAG,QAAQ,QAAQ;AAC5B,OAAOC,cAAc,MAAM,kBAAkB;AAc7C,eAAe,SAASC,eAAeA,CAACC,KAA2B,EAAE;EACnE,MAAM;IAAEC,KAAK;IAAEC,MAAM;IAAEC,KAAK;IAAEC,UAAU;IAAEC,OAAO;IAAEC;EAAS,CAAC,GAAGN,KAAK;EACrE,MAAM;IAAEO;EAAO,CAAC,GAAGjB,UAAU,CAACM,WAAW,CAAC;EAC1C,MAAMY,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI,OAAOL,KAAK,KAAK,QAAQ,EAAE,OAAO,IAAI;IAC1C,oBACEd,KAAA,CAAAoB,aAAA,CAACjB,KAAK;MACJkB,OAAO,EAAG,+DAA8D,OAAOP,KAAM,GAAG;MACxFQ,IAAI,EAAC;IAAS,CACf,CAAC;EAEN,CAAC;EACD,oBACEtB,KAAA,CAAAoB,aAAA;IAAKG,SAAS,EAAC;EAAoC,gBACjDvB,KAAA,CAAAoB,aAAA,YAAIR,KAAS,CAAC,MAAE,eAAAZ,KAAA,CAAAoB,aAAA,CAACX,cAAc;IAACI,MAAM,EAAEA,MAAO;IAACI,QAAQ,EAAEA;EAAS,CAAE,CAAC,EAAC,GAAG,eAC1EjB,KAAA,CAAAoB,aAAA,CAACd,YAAY;IACXO,MAAM,EAAEA,MAAO;IACfW,MAAM,EAAEhB,GAAG,CAACU,MAAM,CAAE;IACpBA,MAAM,EAAEA,MAAO;IACfJ,KAAK,EAAEA;EAAM,CACd,CAAC,EACDK,aAAa,CAAC,CAAC,eAChBnB,KAAA,CAAAoB,aAAA,CAACf,oBAAoB;IACnBU,UAAU,EAAEA,UAAW;IACvBC,OAAO,EAAEA,OAAQ;IACjBF,KAAK,EAAEA,KAAM;IACbG,QAAQ,EAAEA;EAAS,CACpB,CACE,CAAC;AAEV;AAEAP,eAAe,CAACe,SAAS,GAAG;EAC1Bb,KAAK,EAAEV,SAAS,CAACwB,MAAM,CAACC,UAAU;EAClCb,KAAK,EAAEZ,SAAS,CAACwB,MAAM;EACvBV,OAAO,EAAEd,SAAS,CAAC0B,IAAI;EACvBf,MAAM,EAAET,UAAU,CAACuB,UAAU;EAC7BZ,UAAU,EAAEb,SAAS,CAAC2B,KAAK,CAAC;IAC1BC,QAAQ,EAAE5B,SAAS,CAAC0B,IAAI;IACxBG,SAAS,EAAE7B,SAAS,CAAC0B,IAAI;IACzBI,SAAS,EAAE9B,SAAS,CAAC+B;EACvB,CAAC,CAAC;EACFhB,QAAQ,EAAEf,SAAS,CAAC+B,IAAI,CAACN;AAC3B,CAAC;AAEDjB,eAAe,CAACwB,YAAY,GAAG;EAC7BpB,KAAK,EAAE,EAAE;EACTE,OAAO,EAAE,KAAK;EACd;EACAD,UAAU,EAAE;IACV;IACA;IACA;EAAA;AAEJ,CAAC"}