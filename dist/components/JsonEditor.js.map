{"version":3,"file":"JsonEditor.js","names":["React","useState","useEffect","Input","obj2str","obj","JSON","stringify","str2obj","str","parse","JsonEditor","props","value","onSave","jsonStr","setJsonStr","errMsg","setErrMsg","handleChange","event","target","onChange","error","message","handleKeyDown","code","metaKey","preventDefault","createElement","TextArea","autoSize","onKeyDown","style","color"],"sources":["../../src/components/JsonEditor.tsx"],"sourcesContent":["import React, { useState, ChangeEvent, useEffect } from 'react';\nimport { Input } from 'antd';\n\ninterface JsonEditorProps {\n  value: Record<string, unknown>;\n  onChange: (value: Record<string, unknown>) => void;\n  onSave?: () => void;\n}\n\nconst obj2str = (obj: Record<string, unknown>) =>\n  JSON.stringify(obj, null, '  ');\nconst str2obj = (str: string) => JSON.parse(str) as Record<string, unknown>;\n\nconst JsonEditor: React.FC<JsonEditorProps> = (props) => {\n  const { value, onSave = () => {} } = props;\n  const [jsonStr, setJsonStr] = useState(obj2str(value));\n  const [errMsg, setErrMsg] = useState('');\n\n  useEffect(() => {\n    setJsonStr(obj2str(value));\n  }, [value]);\n\n  const handleChange = (event: ChangeEvent<HTMLTextAreaElement>) => {\n    const { value } = event.target;\n    const { onChange } = props;\n\n    setErrMsg('');\n    try {\n      const obj = str2obj(value);\n      onChange(obj);\n    } catch (error) {\n      setErrMsg(\n        `There is something wrong in JSON text, detail: ${\n          (error as Error).message\n        }`\n      );\n    }\n\n    setJsonStr(value);\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent) => {\n    if (event.code === 'KeyS' && event.metaKey) {\n      event.preventDefault();\n      onSave();\n    }\n  };\n\n  return (\n    <div>\n      <Input.TextArea\n        autoSize\n        value={jsonStr}\n        onChange={handleChange}\n        onKeyDown={handleKeyDown}\n      />\n      {errMsg && <div style={{ color: 'red' }}>{errMsg}</div>}\n    </div>\n  );\n};\n\nexport default JsonEditor;\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAeC,SAAS,QAAQ,OAAO;AAC/D,SAASC,KAAK,QAAQ,MAAM;AAQ5B,MAAMC,OAAO,GAAIC,GAA4B,IAC3CC,IAAI,CAACC,SAAS,CAACF,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC;AACjC,MAAMG,OAAO,GAAIC,GAAW,IAAKH,IAAI,CAACI,KAAK,CAACD,GAAG,CAA4B;AAE3E,MAAME,UAAqC,GAAIC,KAAK,IAAK;EACvD,MAAM;IAAEC,KAAK;IAAEC,MAAM,GAAGA,CAAA,KAAM,CAAC;EAAE,CAAC,GAAGF,KAAK;EAC1C,MAAM,CAACG,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAACG,OAAO,CAACS,KAAK,CAAC,CAAC;EACtD,MAAM,CAACI,MAAM,EAAEC,SAAS,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAExCC,SAAS,CAAC,MAAM;IACdc,UAAU,CAACZ,OAAO,CAACS,KAAK,CAAC,CAAC;EAC5B,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EAEX,MAAMM,YAAY,GAAIC,KAAuC,IAAK;IAChE,MAAM;MAAEP;IAAM,CAAC,GAAGO,KAAK,CAACC,MAAM;IAC9B,MAAM;MAAEC;IAAS,CAAC,GAAGV,KAAK;IAE1BM,SAAS,CAAC,EAAE,CAAC;IACb,IAAI;MACF,MAAMb,GAAG,GAAGG,OAAO,CAACK,KAAK,CAAC;MAC1BS,QAAQ,CAACjB,GAAG,CAAC;IACf,CAAC,CAAC,OAAOkB,KAAK,EAAE;MACdL,SAAS,CACN,kDACEK,KAAK,CAAWC,OAClB,EACH,CAAC;IACH;IAEAR,UAAU,CAACH,KAAK,CAAC;EACnB,CAAC;EAED,MAAMY,aAAa,GAAIL,KAA0B,IAAK;IACpD,IAAIA,KAAK,CAACM,IAAI,KAAK,MAAM,IAAIN,KAAK,CAACO,OAAO,EAAE;MAC1CP,KAAK,CAACQ,cAAc,CAAC,CAAC;MACtBd,MAAM,CAAC,CAAC;IACV;EACF,CAAC;EAED,oBACEd,KAAA,CAAA6B,aAAA,2BACE7B,KAAA,CAAA6B,aAAA,CAAC1B,KAAK,CAAC2B,QAAQ;IACbC,QAAQ;IACRlB,KAAK,EAAEE,OAAQ;IACfO,QAAQ,EAAEH,YAAa;IACvBa,SAAS,EAAEP;EAAc,CAC1B,CAAC,EACDR,MAAM,iBAAIjB,KAAA,CAAA6B,aAAA;IAAKI,KAAK,EAAE;MAAEC,KAAK,EAAE;IAAM;EAAE,GAAEjB,MAAY,CACnD,CAAC;AAEV,CAAC;AAED,eAAeN,UAAU"}