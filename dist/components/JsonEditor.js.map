{"version":3,"file":"JsonEditor.js","names":["React","useState","Input","str2obj","JsonEditor","props","value","onChange","onFormValueChange","onSave","errMsg","setErrMsg","handleChange","event","target","obj","error","message","handleKeyDown","code","metaKey","preventDefault","createElement","TextArea","autoSize","onKeyDown","style","color"],"sources":["../../src/components/JsonEditor.tsx"],"sourcesContent":["import React, { useState, ChangeEvent } from 'react';\nimport { Input } from 'antd';\n\nimport { ValueType } from './Form';\nimport { str2obj } from './Form/helpers';\n\ninterface JsonEditorProps {\n  value: string;\n  onChange: (value: string) => void;\n  onFormValueChange: (value: ValueType) => void;\n  onSave?: () => void;\n}\n\nconst JsonEditor: React.FC<JsonEditorProps> = (props) => {\n  const { value, onChange, onFormValueChange, onSave = () => {} } = props;\n  const [errMsg, setErrMsg] = useState('');\n\n  const handleChange = (event: ChangeEvent<HTMLTextAreaElement>) => {\n    onChange(event.target.value);\n\n    setErrMsg('');\n    try {\n      const obj = str2obj(event.target.value);\n      onFormValueChange(obj);\n    } catch (error) {\n      setErrMsg(\n        `There is something wrong in JSON text, detail: ${\n          (error as Error).message\n        }`\n      );\n    }\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent) => {\n    if (event.code === 'KeyS' && event.metaKey) {\n      event.preventDefault();\n      onSave();\n    }\n  };\n\n  return (\n    <div>\n      <Input.TextArea\n        autoSize\n        value={value}\n        onChange={handleChange}\n        onKeyDown={handleKeyDown}\n      />\n      {errMsg && <div style={{ color: 'red' }}>{errMsg}</div>}\n    </div>\n  );\n};\n\nexport default JsonEditor;\n"],"mappings":"AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAqB,OAAO;AACpD,SAASC,KAAK,QAAQ,MAAM;AAG5B,SAASC,OAAO,QAAQ,gBAAgB;AASxC,MAAMC,UAAqC,GAAIC,KAAK,IAAK;EACvD,MAAM;IAAEC,KAAK;IAAEC,QAAQ;IAAEC,iBAAiB;IAAEC,MAAM,GAAGA,CAAA,KAAM,CAAC;EAAE,CAAC,GAAGJ,KAAK;EACvE,MAAM,CAACK,MAAM,EAAEC,SAAS,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAExC,MAAMW,YAAY,GAAIC,KAAuC,IAAK;IAChEN,QAAQ,CAACM,KAAK,CAACC,MAAM,CAACR,KAAK,CAAC;IAE5BK,SAAS,CAAC,EAAE,CAAC;IACb,IAAI;MACF,MAAMI,GAAG,GAAGZ,OAAO,CAACU,KAAK,CAACC,MAAM,CAACR,KAAK,CAAC;MACvCE,iBAAiB,CAACO,GAAG,CAAC;IACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdL,SAAS,CACN,kDACEK,KAAK,CAAWC,OAClB,EACH,CAAC;IACH;EACF,CAAC;EAED,MAAMC,aAAa,GAAIL,KAA0B,IAAK;IACpD,IAAIA,KAAK,CAACM,IAAI,KAAK,MAAM,IAAIN,KAAK,CAACO,OAAO,EAAE;MAC1CP,KAAK,CAACQ,cAAc,CAAC,CAAC;MACtBZ,MAAM,CAAC,CAAC;IACV;EACF,CAAC;EAED,oBACET,KAAA,CAAAsB,aAAA,2BACEtB,KAAA,CAAAsB,aAAA,CAACpB,KAAK,CAACqB,QAAQ;IACbC,QAAQ;IACRlB,KAAK,EAAEA,KAAM;IACbC,QAAQ,EAAEK,YAAa;IACvBa,SAAS,EAAEP;EAAc,CAC1B,CAAC,EACDR,MAAM,iBAAIV,KAAA,CAAAsB,aAAA;IAAKI,KAAK,EAAE;MAAEC,KAAK,EAAE;IAAM;EAAE,GAAEjB,MAAY,CACnD,CAAC;AAEV,CAAC;AAED,eAAeN,UAAU"}