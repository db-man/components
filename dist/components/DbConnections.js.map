{"version":3,"file":"DbConnections.js","names":["React","GithubDb","constants","reloadDbsSchemaAsync","EditableTable","DbConnections","storage","handleLoadDbsClick","githubDb","personalAccessToken","get","LS_KEY_GITHUB_PERSONAL_ACCESS_TOKEN","repoPath","LS_KEY_GITHUB_REPO_PATH","owner","LS_KEY_GITHUB_OWNER","repoName","LS_KEY_GITHUB_REPO_NAME","dbsSchema","LS_KEY_DBS_SCHEMA","github","then","handleDbConnectionEnable","createElement","className","onEnable"],"sources":["../../src/components/DbConnections.tsx"],"sourcesContent":["import React from 'react';\n\nimport { GithubDb } from '@db-man/github';\nimport * as constants from '../constants';\nimport reloadDbsSchemaAsync from '../pages/helpers';\nimport EditableTable from './EditableTable';\n\nexport type StorageType = {\n  set: (k: string, v: string) => void;\n  get: (k: string) => string | null;\n};\n\n/**\n * To save online db tables schema in the local db, then pages could load faster\n */\nconst DbConnections = ({ storage }: { storage: StorageType }) => {\n  const handleLoadDbsClick = () => {\n    const githubDb = new GithubDb({\n      personalAccessToken: storage.get(\n        constants.LS_KEY_GITHUB_PERSONAL_ACCESS_TOKEN\n      ),\n      repoPath: storage.get(constants.LS_KEY_GITHUB_REPO_PATH),\n      owner: storage.get(constants.LS_KEY_GITHUB_OWNER),\n      repoName: storage.get(constants.LS_KEY_GITHUB_REPO_NAME),\n      dbsSchema: storage.get(constants.LS_KEY_DBS_SCHEMA),\n    });\n    const { github } = githubDb;\n    reloadDbsSchemaAsync(github, githubDb).then(() => {});\n  };\n\n  const handleDbConnectionEnable = () => {\n    handleLoadDbsClick();\n  };\n\n  return (\n    <div className='dm-db-connections'>\n      <h2>Database Connections</h2>\n      <EditableTable storage={storage} onEnable={handleDbConnectionEnable} />\n    </div>\n  );\n};\n\nexport default DbConnections;\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,SAASC,QAAQ,QAAQ,gBAAgB;AACzC,OAAO,KAAKC,SAAS,MAAM,cAAc;AACzC,OAAOC,oBAAoB,MAAM,kBAAkB;AACnD,OAAOC,aAAa,MAAM,iBAAiB;AAO3C;AACA;AACA;AACA,MAAMC,aAAa,GAAGA,CAAC;EAAEC;AAAkC,CAAC,KAAK;EAC/D,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;IAC/B,MAAMC,QAAQ,GAAG,IAAIP,QAAQ,CAAC;MAC5BQ,mBAAmB,EAAEH,OAAO,CAACI,GAAG,CAC9BR,SAAS,CAACS,mCACZ,CAAC;MACDC,QAAQ,EAAEN,OAAO,CAACI,GAAG,CAACR,SAAS,CAACW,uBAAuB,CAAC;MACxDC,KAAK,EAAER,OAAO,CAACI,GAAG,CAACR,SAAS,CAACa,mBAAmB,CAAC;MACjDC,QAAQ,EAAEV,OAAO,CAACI,GAAG,CAACR,SAAS,CAACe,uBAAuB,CAAC;MACxDC,SAAS,EAAEZ,OAAO,CAACI,GAAG,CAACR,SAAS,CAACiB,iBAAiB;IACpD,CAAC,CAAC;IACF,MAAM;MAAEC;IAAO,CAAC,GAAGZ,QAAQ;IAC3BL,oBAAoB,CAACiB,MAAM,EAAEZ,QAAQ,CAAC,CAACa,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;EACvD,CAAC;EAED,MAAMC,wBAAwB,GAAGA,CAAA,KAAM;IACrCf,kBAAkB,CAAC,CAAC;EACtB,CAAC;EAED,oBACEP,KAAA,CAAAuB,aAAA;IAAKC,SAAS,EAAC;EAAmB,gBAChCxB,KAAA,CAAAuB,aAAA,aAAI,sBAAwB,CAAC,eAC7BvB,KAAA,CAAAuB,aAAA,CAACnB,aAAa;IAACE,OAAO,EAAEA,OAAQ;IAACmB,QAAQ,EAAEH;EAAyB,CAAE,CACnE,CAAC;AAEV,CAAC;AAED,eAAejB,aAAa"}