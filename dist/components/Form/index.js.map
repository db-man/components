{"version":3,"file":"index.js","names":["React","PropTypes","Select","Button","message","Row","Col","Tabs","Popconfirm","InputNumber","Switch","StringFormField","RadioGroupFormField","JsonEditor","RefTableLink","PageContext","MultiLineInputBox","dbs","constants","TextAreaFormField","validatePrimaryKey","isType","FieldWrapperForCreateUpdatePage","PresetsButtons","renderFormFieldWrapper","id","label","formField","createElement","key","className","filterOutHiddenFields","column","Form","Component","constructor","props","_defineProperty","value","setState","formValues","state","val","context","primaryKey","includes","error","isSplitTable","rows","warnPrimaryKeyInvalid","event","code","metaKey","preventDefault","handleFormSubmit","onSubmit","onDelete","warning","href","dbName","tableName","loading","name","disabled","onChange","handleChange","radioValue","enum","preview","inputProps","autoFocus","onKeyDown","handleKeyDown","placeholder","handleInputChange","handleStringArrayChange","size","mode","style","width","is","isMultipleInputs","isMultipleInputsWithPreview","span","map","img","target","rel","src","alt","tables","checked","type","STRING_ARRAY","renderStringArrayFormField","NUMBER","renderNumberFormField","BOOL","renderBoolFormField","STRING","renderStringFormField","defaultValues","componentDidMount","columns","forEach","col","defaultValue","prevState","appModes","indexOf","render","tabsItems","children","filter","fieldRender","handleJsonEditorChange","defaultActiveKey","items","onClick","title","onConfirm","handleDelete","onCancel","okText","cancelText","danger","propTypes","array","object","isRequired","bool","func","defaultProps","contextType"],"sources":["../../../src/components/Form/index.tsx"],"sourcesContent":["// @ts-nocheck\n\n/* eslint-disable react/destructuring-assignment, react/no-access-state-in-setstate, react/forbid-prop-types, max-len */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Select,\n  Button,\n  message,\n  Row,\n  Col,\n  Tabs,\n  Popconfirm,\n  InputNumber,\n  Switch,\n} from 'antd';\n\nimport StringFormField from '../StringFormField';\nimport RadioGroupFormField from '../RadioGroupFormField';\nimport JsonEditor from '../JsonEditor';\nimport RefTableLink from '../RefTableLink';\nimport PageContext from '../../contexts/page';\nimport MultiLineInputBox from '../MultiLineInputBox';\nimport { dbs } from '../../dbs';\nimport * as constants from '../../constants';\nimport TextAreaFormField from '../TextAreaFormField';\nimport { validatePrimaryKey, isType } from './helpers';\nimport FieldWrapperForCreateUpdatePage from '../FieldWrapperForCreateUpdatePage';\nimport PresetsButtons from '../PresetsButtons';\n\nconst renderFormFieldWrapper = (id, label, formField) => (\n  <div key={id} className=\"dm-form-field dm-string-form-field\">\n    <b>{label}</b>: {formField}\n  </div>\n);\n\nconst filterOutHiddenFields = (column) =>\n  column['type:createUpdatePage'] !== 'HIDE';\n\nexport default class Form extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      formValues: {\n        ...this.props.defaultValues,\n      },\n    };\n  }\n\n  componentDidMount() {\n    this.context.columns.forEach((col) => {\n      if (!this.state.formValues[col.id]) {\n        let defaultValue = '';\n        switch (col['type:createUpdatePage']) {\n          case 'RadioGroup':\n            [defaultValue] = col.enum;\n            break;\n          default:\n            defaultValue = '';\n        }\n        if (defaultValue) {\n          this.setState((prevState) => ({\n            ...prevState,\n            formValues: { ...prevState.formValues, [col.id]: defaultValue },\n          }));\n        }\n      }\n    });\n  }\n\n  handleChange = (key) => (value) => {\n    this.setState({\n      formValues: {\n        ...this.state.formValues,\n        [key]: value,\n      },\n    });\n  };\n\n  handleInputChange = (key) => (val /* ,event */) => {\n    // if key is primary key, check if has space\n    if (key === this.context.primaryKey && val.includes(' ')) {\n      message.error('Primary key cannot contain space');\n    }\n\n    this.setState({\n      formValues: {\n        ...this.state.formValues,\n        [key]: val,\n      },\n    });\n    // When mode is split-table, thats because table file too big.\n    // Will not download big table file, so no checking about duplicated item.\n    if (!this.isSplitTable) {\n      // validate the primary field in form, e.g. duplication check\n      // TODO maybe do this in antd Form component\n      // TODO why do we assume the type of primary column in a table is always `string`?\n      if (key === this.context.primaryKey) {\n        if (\n          !validatePrimaryKey(\n            val,\n            this.props.rows,\n            this.context.primaryKey,\n          )\n        ) {\n          this.warnPrimaryKeyInvalid(val);\n        }\n      }\n    }\n  };\n\n  /**\n   * @param {string} id Column name\n   * @param {string[]} value Cell value\n   */\n  handleStringArrayChange = (id) => (value) =>\n    this.setState({\n      formValues: {\n        ...this.state.formValues,\n        [id]: value,\n      },\n    });\n\n  handleJsonEditorChange = (formValues) => {\n    this.setState({ formValues });\n  };\n\n  handleKeyDown = (event) => {\n    if (event.code === 'KeyS' && event.metaKey) {\n      event.preventDefault();\n      this.handleFormSubmit();\n    }\n  };\n\n  handleFormSubmit = () => {\n    const { formValues } = this.state;\n    this.props.onSubmit(formValues);\n  };\n\n  handleDelete = () => {\n    const { formValues } = this.state;\n    this.props.onDelete(formValues);\n  };\n\n  get isSplitTable() {\n    const { appModes } = this.context;\n    return appModes.indexOf('split-table') !== -1;\n  }\n\n  warnPrimaryKeyInvalid = (value) =>\n    message.warning(\n      <div>\n        Found duplicated item in db{' '}\n        <a\n          href={`/${this.context.dbName}/${this.context.tableName}/update?${this.context.primaryKey}=${value}`}\n        >\n          {value}\n        </a>\n      </div>,\n      10,\n    );\n\n  renderStringFormField = (column) => {\n    const { loading } = this.props;\n    const value = this.state.formValues[column.id];\n    if (column['type:createUpdatePage'] === 'TextArea') {\n      return (\n        <TextAreaFormField\n          key={column.id}\n          label={column.name}\n          rows={2}\n          disabled={loading}\n          value={value}\n          onChange={this.handleChange(column.id)}\n        />\n      );\n    }\n    if (column['type:createUpdatePage'] === 'RadioGroup') {\n      const radioValue = value || column.enum[0];\n      return renderFormFieldWrapper(\n        column.id,\n        column.name,\n        <RadioGroupFormField\n          column={column}\n          disabled={loading}\n          value={radioValue}\n          onChange={this.handleChange(column.id)}\n        />,\n      );\n    }\n    let preview = false;\n    if (column['type:createUpdatePage'] === 'WithPreview') {\n      preview = true;\n    }\n    return (\n      <StringFormField\n        key={column.id}\n        inputProps={{\n          disabled: loading,\n          autoFocus: column.id === this.context.primaryKey,\n          onKeyDown: this.handleKeyDown,\n          placeholder: column.placeholder,\n        }}\n        preview={preview}\n        label={column.name}\n        dbName={this.context.dbName}\n        primaryKey={this.context.primaryKey}\n        column={column}\n        value={value}\n        onChange={this.handleInputChange(column.id)}\n      />\n    );\n  };\n\n  renderStringArrayFormField = (column) => {\n    const { formValues } = this.state;\n\n    if (\n      !column['type:createUpdatePage'] ||\n      column['type:createUpdatePage'] === 'Select'\n    ) {\n      return (\n        <div\n          key={column.id}\n          className=\"dm-form-field dm-string-array-form-field\"\n        >\n          <b>{column.name}</b>:{' '}\n          <PresetsButtons\n            column={column}\n            onChange={(val) => {\n              this.handleStringArrayChange(column.id)([\n                ...(this.state.formValues[column.id] || []),\n                val,\n              ]);\n            }}\n          />\n          {' '}\n          <Select\n            size=\"small\"\n            mode=\"tags\"\n            style={{ width: '100%' }}\n            disabled={this.props.loading}\n            value={formValues[column.id]}\n            onChange={this.handleStringArrayChange(column.id)}\n            onKeyDown={this.handleKeyDown}\n          />\n        </div>\n      );\n    }\n\n    const { is: isMultipleInputs, preview: isMultipleInputsWithPreview } =\n      isType(column, 'MultiLineInputBox');\n    if (isMultipleInputs) {\n      if (isMultipleInputsWithPreview) {\n        return (\n          <FieldWrapperForCreateUpdatePage key={column.id} column={column}>\n            <Row>\n              <Col span={12}>\n                <MultiLineInputBox\n                  rows={2}\n                  disabled={this.props.loading}\n                  value={formValues[column.id]}\n                  onChange={this.handleStringArrayChange(column.id)}\n                />\n              </Col>\n              <Col span={12}>\n                {formValues[column.id] &&\n                  formValues[column.id].map((img) => (\n                    <a key={img} href={img} target=\"_blank\" rel=\"noreferrer\">\n                      <img width=\"200px\" src={img} alt=\"img\" />\n                    </a>\n                  ))}\n              </Col>\n            </Row>\n          </FieldWrapperForCreateUpdatePage>\n        );\n      }\n\n      return (\n        <div\n          key={column.id}\n          className=\"dm-form-field dm-string-array-form-field\"\n        >\n          <b>{column.name}</b>:{' '}\n          <RefTableLink\n            dbName={this.context.dbName}\n            tables={dbs[this.context.dbName]}\n            value={formValues[column.id]}\n            column={column}\n          />\n          <MultiLineInputBox\n            disabled={this.props.loading}\n            value={formValues[column.id]}\n            onChange={this.handleStringArrayChange(column.id)}\n          />\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  renderNumberFormField = (column) => {\n    const { loading } = this.props;\n    return renderFormFieldWrapper(\n      column.id,\n      column.name,\n      <InputNumber\n        size=\"small\"\n        disabled={loading}\n        autoFocus={column.id === this.context.primaryKey}\n        value={this.state.formValues[column.id]}\n        onChange={this.handleChange(column.id)}\n        onKeyDown={this.handleKeyDown}\n      />,\n    );\n  };\n\n  renderBoolFormField = (column) =>\n    renderFormFieldWrapper(\n      column.id,\n      column.name,\n      <Switch\n        size=\"small\"\n        disabled={this.props.loading}\n        checked={this.state.formValues[column.id]}\n        onChange={this.handleChange(column.id)}\n      />,\n    );\n\n  fieldRender = (column) => {\n    switch (column.type) {\n      case constants.STRING_ARRAY:\n        return this.renderStringArrayFormField(column);\n      case constants.NUMBER:\n        return this.renderNumberFormField(column);\n      case constants.BOOL:\n        return this.renderBoolFormField(column);\n      case constants.STRING:\n      default:\n        return this.renderStringFormField(column);\n    }\n  };\n\n  render() {\n    const { loading } = this.props;\n    const tabsItems = [\n      {\n        label: 'Form',\n        key: 'form',\n        children: (\n          <div className=\"dm-form\">\n            {this.context.columns\n              .filter(filterOutHiddenFields)\n              .map(this.fieldRender)}\n          </div>\n        ),\n      },\n      {\n        label: 'JSON',\n        key: 'json',\n        children: (\n          <JsonEditor\n            value={this.state.formValues}\n            onChange={this.handleJsonEditorChange}\n          />\n        ),\n      },\n    ];\n    return (\n      <div className=\"create-update-component\">\n        <Tabs defaultActiveKey=\"form\" items={tabsItems} />\n        <div className=\"dm-action-buttons\">\n          <Button\n            type=\"primary\"\n            disabled={loading}\n            loading={loading}\n            onClick={this.handleFormSubmit}\n          >\n            Save\n          </Button>{' '}\n          |{' '}\n          <Popconfirm\n            title=\"Are you sure to delete?\"\n            onConfirm={this.handleDelete}\n            onCancel={() => {}}\n            okText=\"Yes\"\n            cancelText=\"No\"\n          >\n            <Button danger disabled={loading} loading={loading}>\n              Delete\n            </Button>\n          </Popconfirm>{' '}\n          |{' '}\n          <Button\n            type=\"link\"\n            href={`/${this.context.dbName}/${this.context.tableName}/create`}\n          >\n            Reset\n          </Button>{' '}\n        </div>\n      </div>\n    );\n  }\n}\n\nForm.propTypes = {\n  rows: PropTypes.array,\n  defaultValues: PropTypes.object.isRequired,\n  loading: PropTypes.bool.isRequired,\n  onSubmit: PropTypes.func,\n  onDelete: PropTypes.func,\n};\n\nForm.defaultProps = {\n  rows: [],\n  onSubmit: () => {},\n  onDelete: () => {},\n};\n\nForm.contextType = PageContext;\n"],"mappings":"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"}