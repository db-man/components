{"version":3,"file":"index.js","names":["React","useEffect","useContext","useState","Select","Button","message","Row","Col","Tabs","Popconfirm","InputNumber","Switch","StringFormField","RadioGroupFormField","JsonEditor","RefTableLink","PageContext","MultiLineInputBox","constants","TextAreaFormField","validatePrimaryKey","isType","obj2str","str2obj","getFormInitialValues","FieldWrapperForCreateUpdatePage","PresetsButtons","useAppContext","renderFormFieldWrapper","id","label","formField","createElement","key","className","filterOutHiddenFields","column","Form","props","context","dbs","formValues","setFormValues","defaultValues","jsonStr","setJsonStr","initFormValues","columns","prevFormValues","prevJsonStr","prevJsonObj","changeBothFormAndJsonEditor","newFormValues","handleChange","value","handleInputChange","val","primaryKey","includes","error","isSplitTable","rows","warnPrimaryKeyInvalid","handleStringArrayChange","handleKeyDown","event","code","metaKey","preventDefault","handleFormSubmit","onSubmit","handleDelete","onDelete","appModes","indexOf","warning","href","dbName","tableName","renderStringFormField","loading","name","disabled","onChange","radioValue","enum","preview","inputProps","autoFocus","onKeyDown","placeholder","renderStringArrayFormField","size","mode","style","width","is","isMultipleInputs","isMultipleInputsWithPreview","span","map","img","target","rel","src","alt","tables","renderNumberFormField","renderBoolFormField","checked","fieldRender","type","STRING_ARRAY","NUMBER","BOOL","STRING","tabsItems","children","filter","onFormValueChange","onSave","defaultActiveKey","items","onClick","title","onConfirm","onCancel","okText","cancelText","danger","defaultProps"],"sources":["../../../src/components/Form/index.tsx"],"sourcesContent":["import React, { useEffect, useContext, useState, ReactNode } from 'react';\n// import PropTypes from 'prop-types';\nimport {\n  Select,\n  Button,\n  message,\n  Row,\n  Col,\n  Tabs,\n  Popconfirm,\n  InputNumber,\n  Switch,\n} from 'antd';\n\nimport StringFormField from '../StringFormField';\nimport RadioGroupFormField from '../RadioGroupFormField';\nimport JsonEditor from '../JsonEditor';\nimport RefTableLink from '../RefTableLink';\nimport PageContext from '../../contexts/page';\nimport MultiLineInputBox from '../MultiLineInputBox';\nimport * as constants from '../../constants';\nimport TextAreaFormField from '../TextAreaFormField';\nimport {\n  validatePrimaryKey,\n  isType,\n  obj2str,\n  str2obj,\n  getFormInitialValues,\n} from './helpers';\nimport FieldWrapperForCreateUpdatePage from '../FieldWrapperForCreateUpdatePage';\nimport PresetsButtons from '../PresetsButtons';\nimport Column from '../../types/Column';\nimport { useAppContext } from '../../contexts/AppContext';\n\ninterface RenderFormFieldWrapperProps {\n  id: string;\n  label: string;\n  formField: ReactNode;\n}\n\nexport type ValueType = Record<string, any>;\ntype RowType = ValueType;\n\ninterface FormProps {\n  defaultValues: ValueType;\n  loading: boolean;\n  rows: RowType[];\n  onSubmit: (formValues: ValueType) => void;\n  onDelete: (formValues: ValueType) => void;\n}\n\nconst renderFormFieldWrapper = ({\n  id,\n  label,\n  formField,\n}: RenderFormFieldWrapperProps) => (\n  <div key={id} className='dm-form-field dm-string-form-field'>\n    <b>{label}</b>: {formField}\n  </div>\n);\n\nconst filterOutHiddenFields = (column: Column) =>\n  column['type:createUpdatePage'] !== 'HIDE';\n\nconst Form: React.FC<FormProps> = (props) => {\n  const context = useContext(PageContext);\n  const { dbs } = useAppContext();\n\n  const [formValues, setFormValues] = useState({\n    ...props.defaultValues,\n  });\n  const [jsonStr, setJsonStr] = useState(\n    obj2str({\n      ...props.defaultValues,\n    })\n  );\n\n  useEffect(() => {\n    const initFormValues = getFormInitialValues(context.columns, formValues);\n    setFormValues((prevFormValues) => ({\n      ...prevFormValues,\n      ...initFormValues,\n    }));\n    setJsonStr((prevJsonStr) => {\n      const prevJsonObj = str2obj(prevJsonStr);\n      return obj2str({\n        ...prevJsonObj,\n        ...initFormValues,\n      });\n    });\n  }, []);\n\n  const changeBothFormAndJsonEditor = (newFormValues: ValueType) => {\n    setFormValues(newFormValues);\n    setJsonStr(obj2str(newFormValues));\n  };\n\n  const handleChange = (key: string) => (value: any) => {\n    changeBothFormAndJsonEditor({\n      ...formValues,\n      [key]: value,\n    });\n  };\n\n  const handleInputChange = (key: string) => (val: string /* ,event */) => {\n    // if key is primary key, check if has space\n    if (key === context.primaryKey && val.includes(' ')) {\n      message.error('Primary key cannot contain space');\n    }\n\n    changeBothFormAndJsonEditor({\n      ...formValues,\n      [key]: val,\n    });\n    // When mode is split-table, thats because table file too big.\n    // Will not download big table file, so no checking about duplicated item.\n    if (!isSplitTable()) {\n      // validate the primary field in form, e.g. duplication check\n      // TODO maybe do this in antd Form component\n      // TODO why do we assume the type of primary column in a table is always `string`?\n      if (key === context.primaryKey) {\n        if (!validatePrimaryKey(val, props.rows, context.primaryKey)) {\n          warnPrimaryKeyInvalid(val);\n        }\n      }\n    }\n  };\n\n  /**\n   * @param {string} id Column name\n   * @param {string[]} value Cell value\n   */\n  const handleStringArrayChange = (id: string) => (value: any) =>\n    changeBothFormAndJsonEditor({\n      ...formValues,\n      [id]: value,\n    });\n\n  const handleKeyDown = (event: React.KeyboardEvent) => {\n    if (event.code === 'KeyS' && event.metaKey) {\n      event.preventDefault();\n      handleFormSubmit();\n    }\n  };\n\n  const handleFormSubmit = () => {\n    props.onSubmit(formValues);\n  };\n\n  const handleDelete = () => {\n    props.onDelete(formValues);\n  };\n\n  const isSplitTable = () => {\n    const { appModes } = context;\n    return appModes.indexOf('split-table') !== -1;\n  };\n\n  const warnPrimaryKeyInvalid = (value: string) =>\n    message.warning(\n      <div>\n        Found duplicated item in db{' '}\n        <a\n          href={`/${context.dbName}/${context.tableName}/update?${context.primaryKey}=${value}`}\n        >\n          {value}\n        </a>\n      </div>,\n      10\n    );\n\n  const renderStringFormField = (column: Column) => {\n    const { loading } = props;\n    const value = formValues[column.id];\n    if (column['type:createUpdatePage'] === 'TextArea') {\n      return (\n        <TextAreaFormField\n          key={column.id}\n          label={column.name}\n          rows={2}\n          disabled={loading}\n          value={value}\n          onChange={handleChange(column.id)}\n        />\n      );\n    }\n    if (column['type:createUpdatePage'] === 'RadioGroup') {\n      const radioValue = value || column?.enum?.[0];\n      return renderFormFieldWrapper({\n        id: column.id,\n        label: column.name,\n        formField: (\n          <RadioGroupFormField\n            column={column}\n            disabled={loading}\n            value={radioValue}\n            onChange={handleChange(column.id)}\n          />\n        ),\n      });\n    }\n    let preview = false;\n    if (column['type:createUpdatePage'] === 'WithPreview') {\n      preview = true;\n    }\n    return (\n      <StringFormField\n        key={column.id}\n        inputProps={{\n          disabled: loading,\n          autoFocus: column.id === context.primaryKey,\n          onKeyDown: handleKeyDown,\n          placeholder: column.placeholder,\n        }}\n        preview={preview}\n        label={column.name}\n        dbName={context.dbName}\n        primaryKey={context.primaryKey}\n        column={column}\n        value={value}\n        onChange={handleInputChange(column.id)}\n      />\n    );\n  };\n\n  const renderStringArrayFormField = (column: Column) => {\n    if (\n      !column['type:createUpdatePage'] ||\n      column['type:createUpdatePage'] === 'Select'\n    ) {\n      return (\n        <div\n          key={column.id}\n          className='dm-form-field dm-string-array-form-field'\n        >\n          <b>{column.name}</b>:{' '}\n          <PresetsButtons\n            column={column}\n            onChange={(val: any) => {\n              handleStringArrayChange(column.id)([\n                ...(formValues[column.id] || []),\n                val,\n              ]);\n            }}\n          />{' '}\n          <Select\n            size='small'\n            mode='tags'\n            style={{ width: '100%' }}\n            disabled={props.loading}\n            value={formValues[column.id]}\n            onChange={handleStringArrayChange(column.id)}\n            onKeyDown={handleKeyDown}\n          />\n        </div>\n      );\n    }\n\n    const { is: isMultipleInputs, preview: isMultipleInputsWithPreview } =\n      isType(column, 'MultiLineInputBox');\n    if (isMultipleInputs) {\n      if (isMultipleInputsWithPreview) {\n        return (\n          <FieldWrapperForCreateUpdatePage key={column.id} column={column}>\n            <Row>\n              <Col span={12}>\n                <MultiLineInputBox\n                  rows={2}\n                  disabled={props.loading}\n                  value={formValues[column.id]}\n                  onChange={handleStringArrayChange(column.id)}\n                />\n              </Col>\n              <Col span={12}>\n                {formValues[column.id] &&\n                  formValues[column.id].map((img: string) => (\n                    <a key={img} href={img} target='_blank' rel='noreferrer'>\n                      <img width='200px' src={img} alt='img' />\n                    </a>\n                  ))}\n              </Col>\n            </Row>\n          </FieldWrapperForCreateUpdatePage>\n        );\n      }\n\n      return (\n        <div\n          key={column.id}\n          className='dm-form-field dm-string-array-form-field'\n        >\n          <b>{column.name}</b>:{' '}\n          <RefTableLink\n            dbName={context.dbName}\n            tables={dbs[context.dbName]}\n            value={formValues[column.id]}\n            column={column}\n          />\n          <MultiLineInputBox\n            disabled={props.loading}\n            value={formValues[column.id]}\n            onChange={handleStringArrayChange(column.id)}\n          />\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  const renderNumberFormField = (column: Column) => {\n    const { loading } = props;\n    return renderFormFieldWrapper({\n      id: column.id,\n      label: column.name,\n      formField: (\n        <InputNumber\n          size='small'\n          disabled={loading}\n          autoFocus={column.id === context.primaryKey}\n          value={formValues[column.id]}\n          onChange={handleChange(column.id)}\n          onKeyDown={handleKeyDown}\n        />\n      ),\n    });\n  };\n\n  const renderBoolFormField = (column: Column) =>\n    renderFormFieldWrapper({\n      id: column.id,\n      label: column.name,\n      formField: (\n        <Switch\n          size='small'\n          disabled={props.loading}\n          checked={formValues[column.id]}\n          onChange={handleChange(column.id)}\n        />\n      ),\n    });\n\n  const fieldRender = (column: Column) => {\n    switch (column.type) {\n      case constants.STRING_ARRAY:\n        return renderStringArrayFormField(column);\n      case constants.NUMBER:\n        return renderNumberFormField(column);\n      case constants.BOOL:\n        return renderBoolFormField(column);\n      case constants.STRING:\n      default:\n        return renderStringFormField(column);\n    }\n  };\n\n  const { loading } = props;\n  const tabsItems = [\n    {\n      label: 'Form',\n      key: 'form',\n      children: (\n        <div className='dm-form'>\n          {context.columns.filter(filterOutHiddenFields).map(fieldRender)}\n        </div>\n      ),\n    },\n    {\n      label: 'JSON',\n      key: 'json',\n      children: (\n        <JsonEditor\n          value={jsonStr}\n          onChange={setJsonStr}\n          onFormValueChange={setFormValues}\n          onSave={() => {\n            handleFormSubmit();\n          }}\n        />\n      ),\n    },\n  ];\n  return (\n    <div className='create-update-component'>\n      <Tabs defaultActiveKey='form' items={tabsItems} />\n      <div className='dm-action-buttons'>\n        <Button\n          type='primary'\n          disabled={loading}\n          loading={loading}\n          onClick={handleFormSubmit}\n        >\n          Save\n        </Button>{' '}\n        |{' '}\n        <Popconfirm\n          title='Are you sure to delete?'\n          onConfirm={handleDelete}\n          onCancel={() => {}}\n          okText='Yes'\n          cancelText='No'\n        >\n          <Button danger disabled={loading} loading={loading}>\n            Delete\n          </Button>\n        </Popconfirm>{' '}\n        |{' '}\n        <Button\n          type='link'\n          href={`/${context.dbName}/${context.tableName}/create`}\n        >\n          Reset\n        </Button>{' '}\n      </div>\n    </div>\n  );\n};\n\n// Form.propTypes = {\n//   rows: PropTypes.array,\n//   defaultValues: PropTypes.object.isRequired,\n//   loading: PropTypes.bool.isRequired,\n//   onSubmit: PropTypes.func,\n//   onDelete: PropTypes.func,\n// };\n\nForm.defaultProps = {\n  rows: [],\n  onSubmit: () => {},\n  onDelete: () => {},\n};\n\nexport default Form;\n"],"mappings":"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"}