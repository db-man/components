{"version":3,"file":"index.js","names":["React","useEffect","useContext","useState","Select","Button","message","Row","Col","Tabs","Popconfirm","InputNumber","Switch","StringFormField","RadioGroupFormField","JsonEditor","RefTableLink","PageContext","MultiLineInputBox","dbs","constants","TextAreaFormField","validatePrimaryKey","isType","FieldWrapperForCreateUpdatePage","PresetsButtons","renderFormFieldWrapper","id","label","formField","createElement","key","className","filterOutHiddenFields","column","Form","props","context","formValues","setFormValues","defaultValues","columns","forEach","col","defaultValue","enum","prevState","handleChange","value","handleInputChange","val","primaryKey","includes","error","isSplitTable","rows","warnPrimaryKeyInvalid","handleStringArrayChange","handleJsonEditorChange","newFormValues","handleKeyDown","event","code","metaKey","preventDefault","handleFormSubmit","onSubmit","handleDelete","onDelete","appModes","indexOf","warning","href","dbName","tableName","renderStringFormField","loading","name","disabled","onChange","radioValue","preview","inputProps","autoFocus","onKeyDown","placeholder","renderStringArrayFormField","size","mode","style","width","is","isMultipleInputs","isMultipleInputsWithPreview","span","map","img","target","rel","src","alt","tables","renderNumberFormField","renderBoolFormField","checked","fieldRender","type","STRING_ARRAY","NUMBER","BOOL","STRING","tabsItems","children","filter","onSave","defaultActiveKey","items","onClick","title","onConfirm","onCancel","okText","cancelText","danger","defaultProps"],"sources":["../../../src/components/Form/index.tsx"],"sourcesContent":["import React, { useEffect, useContext, useState, ReactNode } from 'react';\n// import PropTypes from 'prop-types';\nimport {\n  Select,\n  Button,\n  message,\n  Row,\n  Col,\n  Tabs,\n  Popconfirm,\n  InputNumber,\n  Switch,\n} from 'antd';\n\nimport StringFormField from '../StringFormField';\nimport RadioGroupFormField from '../RadioGroupFormField';\nimport JsonEditor from '../JsonEditor';\nimport RefTableLink from '../RefTableLink';\nimport PageContext from '../../contexts/page';\nimport MultiLineInputBox from '../MultiLineInputBox';\nimport { dbs } from '../../dbs';\nimport * as constants from '../../constants';\nimport TextAreaFormField from '../TextAreaFormField';\nimport { validatePrimaryKey, isType } from './helpers';\nimport FieldWrapperForCreateUpdatePage from '../FieldWrapperForCreateUpdatePage';\nimport PresetsButtons from '../PresetsButtons';\nimport Column from '../../types/Column';\n\ninterface RenderFormFieldWrapperProps {\n  id: string;\n  label: string;\n  formField: ReactNode;\n}\n\nconst renderFormFieldWrapper = ({\n  id,\n  label,\n  formField,\n}: RenderFormFieldWrapperProps) => (\n  <div key={id} className='dm-form-field dm-string-form-field'>\n    <b>{label}</b>: {formField}\n  </div>\n);\n\nconst filterOutHiddenFields = (column: Column) =>\n  column['type:createUpdatePage'] !== 'HIDE';\n\ninterface FormProps {\n  defaultValues: Record<string, any>;\n  loading: boolean;\n  rows: Record<string, any>[];\n  onSubmit: (formValues: Record<string, any>) => void;\n  onDelete: (formValues: Record<string, any>) => void;\n}\n\nconst Form: React.FC<FormProps> = (props) => {\n  const context = useContext(PageContext);\n\n  const [formValues, setFormValues] = useState({\n    ...props.defaultValues,\n  });\n\n  useEffect(() => {\n    context.columns.forEach((col: Column) => {\n      if (!formValues[col.id]) {\n        let defaultValue = '';\n        switch (col['type:createUpdatePage']) {\n          case 'RadioGroup':\n            [defaultValue] = col.enum!;\n            break;\n          default:\n            defaultValue = '';\n        }\n        if (defaultValue) {\n          setFormValues((prevState) => ({\n            ...prevState,\n            [col.id]: defaultValue,\n          }));\n        }\n      }\n    });\n  }, []);\n\n  const handleChange = (key: string) => (value: any) => {\n    setFormValues({\n      ...formValues,\n      [key]: value,\n    });\n  };\n\n  const handleInputChange = (key: string) => (val: any /* ,event */) => {\n    // if key is primary key, check if has space\n    if (key === context.primaryKey && val.includes(' ')) {\n      message.error('Primary key cannot contain space');\n    }\n\n    setFormValues({\n      ...formValues,\n      [key]: val,\n    });\n    // When mode is split-table, thats because table file too big.\n    // Will not download big table file, so no checking about duplicated item.\n    if (!isSplitTable()) {\n      // validate the primary field in form, e.g. duplication check\n      // TODO maybe do this in antd Form component\n      // TODO why do we assume the type of primary column in a table is always `string`?\n      if (key === context.primaryKey) {\n        if (!validatePrimaryKey(val, props.rows, context.primaryKey)) {\n          warnPrimaryKeyInvalid(val);\n        }\n      }\n    }\n  };\n\n  /**\n   * @param {string} id Column name\n   * @param {string[]} value Cell value\n   */\n  const handleStringArrayChange = (id: string) => (value: any) =>\n    setFormValues({\n      ...formValues,\n      [id]: value,\n    });\n\n  const handleJsonEditorChange = (newFormValues: Record<string, any>) => {\n    setFormValues(newFormValues);\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent) => {\n    if (event.code === 'KeyS' && event.metaKey) {\n      event.preventDefault();\n      handleFormSubmit();\n    }\n  };\n\n  const handleFormSubmit = () => {\n    props.onSubmit(formValues);\n  };\n\n  const handleDelete = () => {\n    props.onDelete(formValues);\n  };\n\n  const isSplitTable = () => {\n    const { appModes } = context;\n    return appModes.indexOf('split-table') !== -1;\n  };\n\n  const warnPrimaryKeyInvalid = (value: string) =>\n    message.warning(\n      <div>\n        Found duplicated item in db{' '}\n        <a\n          href={`/${context.dbName}/${context.tableName}/update?${context.primaryKey}=${value}`}\n        >\n          {value}\n        </a>\n      </div>,\n      10\n    );\n\n  const renderStringFormField = (column: Column) => {\n    const { loading } = props;\n    const value = formValues[column.id];\n    if (column['type:createUpdatePage'] === 'TextArea') {\n      return (\n        <TextAreaFormField\n          key={column.id}\n          label={column.name}\n          rows={2}\n          disabled={loading}\n          value={value}\n          onChange={handleChange(column.id)}\n        />\n      );\n    }\n    if (column['type:createUpdatePage'] === 'RadioGroup') {\n      const radioValue = value || column?.enum?.[0];\n      return renderFormFieldWrapper({\n        id: column.id,\n        label: column.name,\n        formField: (\n          <RadioGroupFormField\n            column={column}\n            disabled={loading}\n            value={radioValue}\n            onChange={handleChange(column.id)}\n          />\n        ),\n      });\n    }\n    let preview = false;\n    if (column['type:createUpdatePage'] === 'WithPreview') {\n      preview = true;\n    }\n    return (\n      <StringFormField\n        key={column.id}\n        inputProps={{\n          disabled: loading,\n          autoFocus: column.id === context.primaryKey,\n          onKeyDown: handleKeyDown,\n          placeholder: column.placeholder,\n        }}\n        preview={preview}\n        label={column.name}\n        dbName={context.dbName}\n        primaryKey={context.primaryKey}\n        column={column}\n        value={value}\n        onChange={handleInputChange(column.id)}\n      />\n    );\n  };\n\n  const renderStringArrayFormField = (column: Column) => {\n    if (\n      !column['type:createUpdatePage'] ||\n      column['type:createUpdatePage'] === 'Select'\n    ) {\n      return (\n        <div\n          key={column.id}\n          className='dm-form-field dm-string-array-form-field'\n        >\n          <b>{column.name}</b>:{' '}\n          <PresetsButtons\n            column={column}\n            onChange={(val: any) => {\n              handleStringArrayChange(column.id)([\n                ...(formValues[column.id] || []),\n                val,\n              ]);\n            }}\n          />{' '}\n          <Select\n            size='small'\n            mode='tags'\n            style={{ width: '100%' }}\n            disabled={props.loading}\n            value={formValues[column.id]}\n            onChange={handleStringArrayChange(column.id)}\n            onKeyDown={handleKeyDown}\n          />\n        </div>\n      );\n    }\n\n    const { is: isMultipleInputs, preview: isMultipleInputsWithPreview } =\n      isType(column, 'MultiLineInputBox');\n    if (isMultipleInputs) {\n      if (isMultipleInputsWithPreview) {\n        return (\n          <FieldWrapperForCreateUpdatePage key={column.id} column={column}>\n            <Row>\n              <Col span={12}>\n                <MultiLineInputBox\n                  rows={2}\n                  disabled={props.loading}\n                  value={formValues[column.id]}\n                  onChange={handleStringArrayChange(column.id)}\n                />\n              </Col>\n              <Col span={12}>\n                {formValues[column.id] &&\n                  formValues[column.id].map((img: string) => (\n                    <a key={img} href={img} target='_blank' rel='noreferrer'>\n                      <img width='200px' src={img} alt='img' />\n                    </a>\n                  ))}\n              </Col>\n            </Row>\n          </FieldWrapperForCreateUpdatePage>\n        );\n      }\n\n      return (\n        <div\n          key={column.id}\n          className='dm-form-field dm-string-array-form-field'\n        >\n          <b>{column.name}</b>:{' '}\n          <RefTableLink\n            dbName={context.dbName}\n            tables={dbs[context.dbName]}\n            value={formValues[column.id]}\n            column={column}\n          />\n          <MultiLineInputBox\n            disabled={props.loading}\n            value={formValues[column.id]}\n            onChange={handleStringArrayChange(column.id)}\n          />\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  const renderNumberFormField = (column: Column) => {\n    const { loading } = props;\n    return renderFormFieldWrapper({\n      id: column.id,\n      label: column.name,\n      formField: (\n        <InputNumber\n          size='small'\n          disabled={loading}\n          autoFocus={column.id === context.primaryKey}\n          value={formValues[column.id]}\n          onChange={handleChange(column.id)}\n          onKeyDown={handleKeyDown}\n        />\n      ),\n    });\n  };\n\n  const renderBoolFormField = (column: Column) =>\n    renderFormFieldWrapper({\n      id: column.id,\n      label: column.name,\n      formField: (\n        <Switch\n          size='small'\n          disabled={props.loading}\n          checked={formValues[column.id]}\n          onChange={handleChange(column.id)}\n        />\n      ),\n    });\n\n  const fieldRender = (column: Column) => {\n    switch (column.type) {\n      case constants.STRING_ARRAY:\n        return renderStringArrayFormField(column);\n      case constants.NUMBER:\n        return renderNumberFormField(column);\n      case constants.BOOL:\n        return renderBoolFormField(column);\n      case constants.STRING:\n      default:\n        return renderStringFormField(column);\n    }\n  };\n\n  const { loading } = props;\n  const tabsItems = [\n    {\n      label: 'Form',\n      key: 'form',\n      children: (\n        <div className='dm-form'>\n          {context.columns.filter(filterOutHiddenFields).map(fieldRender)}\n        </div>\n      ),\n    },\n    {\n      label: 'JSON',\n      key: 'json',\n      children: (\n        <JsonEditor\n          value={formValues}\n          onChange={handleJsonEditorChange}\n          onSave={() => {\n            handleFormSubmit();\n          }}\n        />\n      ),\n    },\n  ];\n  return (\n    <div className='create-update-component'>\n      <Tabs defaultActiveKey='form' items={tabsItems} />\n      <div className='dm-action-buttons'>\n        <Button\n          type='primary'\n          disabled={loading}\n          loading={loading}\n          onClick={handleFormSubmit}\n        >\n          Save\n        </Button>{' '}\n        |{' '}\n        <Popconfirm\n          title='Are you sure to delete?'\n          onConfirm={handleDelete}\n          onCancel={() => {}}\n          okText='Yes'\n          cancelText='No'\n        >\n          <Button danger disabled={loading} loading={loading}>\n            Delete\n          </Button>\n        </Popconfirm>{' '}\n        |{' '}\n        <Button\n          type='link'\n          href={`/${context.dbName}/${context.tableName}/create`}\n        >\n          Reset\n        </Button>{' '}\n      </div>\n    </div>\n  );\n};\n\n// Form.propTypes = {\n//   rows: PropTypes.array,\n//   defaultValues: PropTypes.object.isRequired,\n//   loading: PropTypes.bool.isRequired,\n//   onSubmit: PropTypes.func,\n//   onDelete: PropTypes.func,\n// };\n\nForm.defaultProps = {\n  rows: [],\n  onSubmit: () => {},\n  onDelete: () => {},\n};\n\nexport default Form;\n"],"mappings":"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"}