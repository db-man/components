{"version":3,"file":"index.test.js","names":["React","BrowserRouter","render","act","ListPageBody","PageContext","context","dbName","tableName","action","columns","id","name","primaryKey","tables","githubDb","getTableRows","jest","fn","mock","beforeEach","mockReset","mockResolvedValue","content","userId","afterEach","describe","it","Object","defineProperty","window","writable","value","mockImplementation","query","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","createElement","Provider"],"sources":["../../../src/components/ListPage/index.test.tsx"],"sourcesContent":["// @ts-nocheck\n\nimport React from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport {\n  render, act, /* screen,  waitFor, */\n} from '@testing-library/react';\n\nimport ListPageBody from './index';\nimport PageContext from '../../contexts/page';\n\nconst context = {\n  dbName: 'db-man',\n  tableName: 'users',\n  action: 'list',\n  columns: [{ id: 'id', name: 'ID' }, { id: 'email', name: 'Email' }],\n  primaryKey: 'id',\n  tables: [],\n  githubDb: {\n    getTableRows: jest.fn(),\n  },\n};\njest.mock('@db-man/github');\n\nbeforeEach(() => {\n  context.githubDb.getTableRows.mockReset();\n  context.githubDb.getTableRows.mockResolvedValue({ content: [{ userId: '123' }] });\n});\n\nafterEach(() => {\n\n});\n\ndescribe('ListPageBody', () => {\n  it('renders table properly', async () => {\n    Object.defineProperty(window, 'matchMedia', {\n      writable: true,\n      value: jest.fn().mockImplementation((query) => ({\n        matches: false,\n        media: query,\n        onchange: null,\n        addListener: jest.fn(), // deprecated\n        removeListener: jest.fn(), // deprecated\n        addEventListener: jest.fn(),\n        removeEventListener: jest.fn(),\n        dispatchEvent: jest.fn(),\n      })),\n    });\n\n    // githubDb.getTableRows.mockResolvedValue({ content: [{ id: '123', email: 'foo@abc.com' }] });\n\n    act(() => {\n      render(\n        <BrowserRouter>\n          <PageContext.Provider value={context}>\n            <ListPageBody tableName=\"users\" />\n          </PageContext.Provider>\n        </BrowserRouter>,\n      );\n    });\n\n    // await screen.findByText('Loading db-man/users ...');\n\n    // await waitFor(() => expect(githubDb.getTableRows).toHaveBeenCalledTimes(1));\n\n    // await screen.findByText('123');\n    // await screen.findByText('foo');\n\n    // screen.debug();\n\n    // expect(\n    //   container.innerHTML,\n    // ).toMatchSnapshot(); /* ... gets filled automatically by jest ... */\n  });\n});\n"],"mappings":"AAAA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,aAAa,QAAQ,kBAAkB;AAChD,SACEC,MAAM,EAAEC,GAAG,CAAE,+BACR,wBAAwB;AAE/B,OAAOC,YAAY,MAAM,SAAS;AAClC,OAAOC,WAAW,MAAM,qBAAqB;AAE7C,MAAMC,OAAO,GAAG;EACdC,MAAM,EAAE,QAAQ;EAChBC,SAAS,EAAE,OAAO;EAClBC,MAAM,EAAE,MAAM;EACdC,OAAO,EAAE,CAAC;IAAEC,EAAE,EAAE,IAAI;IAAEC,IAAI,EAAE;EAAK,CAAC,EAAE;IAAED,EAAE,EAAE,OAAO;IAAEC,IAAI,EAAE;EAAQ,CAAC,CAAC;EACnEC,UAAU,EAAE,IAAI;EAChBC,MAAM,EAAE,EAAE;EACVC,QAAQ,EAAE;IACRC,YAAY,EAAEC,IAAI,CAACC,EAAE,CAAC;EACxB;AACF,CAAC;AACDD,IAAI,CAACE,IAAI,CAAC,gBAAgB,CAAC;AAE3BC,UAAU,CAAC,MAAM;EACfd,OAAO,CAACS,QAAQ,CAACC,YAAY,CAACK,SAAS,CAAC,CAAC;EACzCf,OAAO,CAACS,QAAQ,CAACC,YAAY,CAACM,iBAAiB,CAAC;IAAEC,OAAO,EAAE,CAAC;MAAEC,MAAM,EAAE;IAAM,CAAC;EAAE,CAAC,CAAC;AACnF,CAAC,CAAC;AAEFC,SAAS,CAAC,MAAM,CAEhB,CAAC,CAAC;AAEFC,QAAQ,CAAC,cAAc,EAAE,MAAM;EAC7BC,EAAE,CAAC,wBAAwB,EAAE,YAAY;IACvCC,MAAM,CAACC,cAAc,CAACC,MAAM,EAAE,YAAY,EAAE;MAC1CC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAEf,IAAI,CAACC,EAAE,CAAC,CAAC,CAACe,kBAAkB,CAAEC,KAAK,KAAM;QAC9CC,OAAO,EAAE,KAAK;QACdC,KAAK,EAAEF,KAAK;QACZG,QAAQ,EAAE,IAAI;QACdC,WAAW,EAAErB,IAAI,CAACC,EAAE,CAAC,CAAC;QAAE;QACxBqB,cAAc,EAAEtB,IAAI,CAACC,EAAE,CAAC,CAAC;QAAE;QAC3BsB,gBAAgB,EAAEvB,IAAI,CAACC,EAAE,CAAC,CAAC;QAC3BuB,mBAAmB,EAAExB,IAAI,CAACC,EAAE,CAAC,CAAC;QAC9BwB,aAAa,EAAEzB,IAAI,CAACC,EAAE,CAAC;MACzB,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;;IAEAf,GAAG,CAAC,MAAM;MACRD,MAAM,eACJF,KAAA,CAAA2C,aAAA,CAAC1C,aAAa,qBACZD,KAAA,CAAA2C,aAAA,CAACtC,WAAW,CAACuC,QAAQ;QAACZ,KAAK,EAAE1B;MAAQ,gBACnCN,KAAA,CAAA2C,aAAA,CAACvC,YAAY;QAACI,SAAS,EAAC;MAAO,CAAE,CACb,CACT,CACjB,CAAC;IACH,CAAC,CAAC;;IAEF;;IAEA;;IAEA;IACA;;IAEA;;IAEA;IACA;IACA;EACF,CAAC,CAAC;AACJ,CAAC,CAAC"}