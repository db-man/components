{"version":3,"file":"index.test.js","names":["React","BrowserRouter","render","act","ListPageBody","PageContext","STRING","context","dbName","tableName","action","columns","id","name","type","primaryKey","tables","githubDb","getTableRows","jest","fn","appModes","dbs","mock","beforeEach","mockReset","mockResolvedValue","content","userId","afterEach","describe","it","Object","defineProperty","window","writable","value","mockImplementation","query","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","createElement","Provider"],"sources":["../../../src/components/ListPage/index.test.tsx"],"sourcesContent":["// @ts-nocheck\n\nimport React from 'react';\nimport { BrowserRouter } from 'react-router-dom';\nimport { render, act /* screen,  waitFor, */ } from '@testing-library/react';\n\nimport ListPageBody from './index';\nimport PageContext from '../../contexts/page';\nimport { STRING } from '../../constants';\n\nconst context = {\n  dbName: 'db-man',\n  tableName: 'users',\n  action: 'list',\n  columns: [\n    { id: 'id', name: 'ID', type: STRING },\n    { id: 'email', name: 'Email', type: STRING },\n  ],\n  primaryKey: 'id',\n  tables: [],\n  githubDb: {\n    getTableRows: jest.fn(),\n  },\n  appModes: [],\n  dbs: {},\n};\njest.mock('@db-man/github');\n\nbeforeEach(() => {\n  context.githubDb.getTableRows.mockReset();\n  context.githubDb.getTableRows.mockResolvedValue({\n    content: [{ userId: '123' }],\n  });\n});\n\nafterEach(() => {});\n\ndescribe('ListPageBody', () => {\n  it('renders table properly', async () => {\n    Object.defineProperty(window, 'matchMedia', {\n      writable: true,\n      value: jest.fn().mockImplementation((query) => ({\n        matches: false,\n        media: query,\n        onchange: null,\n        addListener: jest.fn(), // deprecated\n        removeListener: jest.fn(), // deprecated\n        addEventListener: jest.fn(),\n        removeEventListener: jest.fn(),\n        dispatchEvent: jest.fn(),\n      })),\n    });\n\n    // githubDb.getTableRows.mockResolvedValue({ content: [{ id: '123', email: 'foo@abc.com' }] });\n\n    // eslint-disable-next-line\n    act(() => {\n      render(\n        <BrowserRouter>\n          <PageContext.Provider value={context}>\n            <ListPageBody tableName='users' />\n          </PageContext.Provider>\n        </BrowserRouter>\n      );\n    });\n\n    // await screen.findByText('Loading db-man/users ...');\n\n    // await waitFor(() => expect(githubDb.getTableRows).toHaveBeenCalledTimes(1));\n\n    // await screen.findByText('123');\n    // await screen.findByText('foo');\n\n    // screen.debug();\n\n    // expect(\n    //   container.innerHTML,\n    // ).toMatchSnapshot(); /* ... gets filled automatically by jest ... */\n  });\n});\n"],"mappings":"AAAA;;AAEA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,aAAa,QAAQ,kBAAkB;AAChD,SAASC,MAAM,EAAEC,GAAG,CAAC,+BAA+B,wBAAwB;AAE5E,OAAOC,YAAY,MAAM,SAAS;AAClC,OAAOC,WAAW,MAAM,qBAAqB;AAC7C,SAASC,MAAM,QAAQ,iBAAiB;AAExC,MAAMC,OAAO,GAAG;EACdC,MAAM,EAAE,QAAQ;EAChBC,SAAS,EAAE,OAAO;EAClBC,MAAM,EAAE,MAAM;EACdC,OAAO,EAAE,CACP;IAAEC,EAAE,EAAE,IAAI;IAAEC,IAAI,EAAE,IAAI;IAAEC,IAAI,EAAER;EAAO,CAAC,EACtC;IAAEM,EAAE,EAAE,OAAO;IAAEC,IAAI,EAAE,OAAO;IAAEC,IAAI,EAAER;EAAO,CAAC,CAC7C;EACDS,UAAU,EAAE,IAAI;EAChBC,MAAM,EAAE,EAAE;EACVC,QAAQ,EAAE;IACRC,YAAY,EAAEC,IAAI,CAACC,EAAE,CAAC;EACxB,CAAC;EACDC,QAAQ,EAAE,EAAE;EACZC,GAAG,EAAE,CAAC;AACR,CAAC;AACDH,IAAI,CAACI,IAAI,CAAC,gBAAgB,CAAC;AAE3BC,UAAU,CAAC,MAAM;EACfjB,OAAO,CAACU,QAAQ,CAACC,YAAY,CAACO,SAAS,CAAC,CAAC;EACzClB,OAAO,CAACU,QAAQ,CAACC,YAAY,CAACQ,iBAAiB,CAAC;IAC9CC,OAAO,EAAE,CAAC;MAAEC,MAAM,EAAE;IAAM,CAAC;EAC7B,CAAC,CAAC;AACJ,CAAC,CAAC;AAEFC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;AAEnBC,QAAQ,CAAC,cAAc,EAAE,MAAM;EAC7BC,EAAE,CAAC,wBAAwB,EAAE,YAAY;IACvCC,MAAM,CAACC,cAAc,CAACC,MAAM,EAAE,YAAY,EAAE;MAC1CC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAEjB,IAAI,CAACC,EAAE,CAAC,CAAC,CAACiB,kBAAkB,CAAEC,KAAK,KAAM;QAC9CC,OAAO,EAAE,KAAK;QACdC,KAAK,EAAEF,KAAK;QACZG,QAAQ,EAAE,IAAI;QACdC,WAAW,EAAEvB,IAAI,CAACC,EAAE,CAAC,CAAC;QAAE;QACxBuB,cAAc,EAAExB,IAAI,CAACC,EAAE,CAAC,CAAC;QAAE;QAC3BwB,gBAAgB,EAAEzB,IAAI,CAACC,EAAE,CAAC,CAAC;QAC3ByB,mBAAmB,EAAE1B,IAAI,CAACC,EAAE,CAAC,CAAC;QAC9B0B,aAAa,EAAE3B,IAAI,CAACC,EAAE,CAAC;MACzB,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;;IAEA;IACAjB,GAAG,CAAC,MAAM;MACRD,MAAM,eACJF,KAAA,CAAA+C,aAAA,CAAC9C,aAAa,qBACZD,KAAA,CAAA+C,aAAA,CAAC1C,WAAW,CAAC2C,QAAQ;QAACZ,KAAK,EAAE7B;MAAQ,gBACnCP,KAAA,CAAA+C,aAAA,CAAC3C,YAAY;QAACK,SAAS,EAAC;MAAO,CAAE,CACb,CACT,CACjB,CAAC;IACH,CAAC,CAAC;;IAEF;;IAEA;;IAEA;IACA;;IAEA;;IAEA;IACA;IACA;EACF,CAAC,CAAC;AACJ,CAAC,CAAC"}