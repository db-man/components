{"version":3,"file":"RandomPageBody.js","names":["React","Link","List","Card","PageContext","ddRender","listGrid","gutter","xs","sm","md","lg","xl","xxl","getAny","arr","Math","floor","random","length","getRandomItems","rows","randomItems","i","push","RandomPageBody","Component","constructor","props","_defineProperty","content","context","githubDb","getTableRows","dbName","tableName","setState","error","console","item","primaryKey","column","columns","find","col","id","args","fn","getRender","val","createElement","Item","to","pathname","search","state","grid","dataSource","renderItem","componentDidMount","getDataAsync","render","className","renderList","contextType"],"sources":["../../src/components/RandomPageBody.tsx"],"sourcesContent":["// @ts-nocheck\n\n/* eslint-disable react/destructuring-assignment, no-console, max-len */\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { List, Card } from 'antd';\n\n// import { contexts as PageContext, ddRender } from '@db-man/components';\nimport PageContext from '../contexts/page';\nimport * as ddRender from '../ddRender/ddRender';\n\nconst listGrid = {\n  gutter: 16,\n  xs: 1,\n  sm: 2,\n  md: 4,\n  lg: 4,\n  xl: 4,\n  xxl: 3,\n};\nconst getAny = (arr) => arr[Math.floor(Math.random() * arr.length)];\nconst getRandomItems = (rows) => {\n  const randomItems = [];\n  for (let i = 0; i < 8; i += 1) {\n    randomItems.push(getAny(rows));\n  }\n  return randomItems;\n};\n\nexport default class RandomPageBody extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      content: null,\n    };\n  }\n\n  componentDidMount() {\n    this.getDataAsync();\n  }\n\n  getDataAsync = async () => {\n    try {\n      const { content } = await this.context.githubDb.getTableRows(\n        this.context.dbName,\n        this.context.tableName,\n      );\n      this.setState({\n        content,\n\n      });\n    } catch (error) {\n      console.error(\n        'Failed to get JSON file in RandomPageBody component, error:',\n        error,\n      );\n    }\n  };\n\n  renderItem = (item) => {\n    const { primaryKey } = this.context;\n    const column = this.context.columns.find((col) => col.id === primaryKey);\n    const args = column['type:randomPage'];\n    const fn = ddRender.getRender(args) || ((val) => val);\n    return (\n      <List.Item>\n        <Card>\n          <div>{fn(item[primaryKey], item, 0)}</div>\n          <Link\n            to={{\n              pathname: `/${this.context.dbName}/${this.context.tableName}/update`,\n              search: `?${primaryKey}=${item[primaryKey]}`,\n            }}\n          >\n            Update\n          </Link>\n        </Card>\n      </List.Item>\n    );\n  };\n\n  renderList = () => {\n    const { content } = this.state;\n    if (!content) return null;\n\n    return (\n      <List\n        grid={listGrid}\n        dataSource={getRandomItems(content)}\n        renderItem={this.renderItem}\n      />\n    );\n  };\n\n  render() {\n    return (\n      <div className=\"random-page-body-component\">{this.renderList()}</div>\n    );\n  }\n}\n\nRandomPageBody.contextType = PageContext;\n"],"mappings":"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"}