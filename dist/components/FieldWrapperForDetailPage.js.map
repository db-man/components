{"version":3,"file":"FieldWrapperForDetailPage.js","names":["React","useContext","PropTypes","dbs","RefTableLink","PageContext","columnType","constants","FieldWrapperForDetailPage","column","value","children","dbName","typeClassName","type","STRING_ARRAY","createElement","className","JSON","stringify","name","id","length","referenceTable","tables","propTypes","isRequired","oneOfType","number","bool","string","arrayOf","node","defaultProps"],"sources":["../../src/components/FieldWrapperForDetailPage.tsx"],"sourcesContent":["import React, { ReactNode, useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { dbs } from '../dbs';\nimport RefTableLink from './RefTableLink';\nimport PageContext from '../contexts/page';\n\nimport { columnType } from './types';\nimport * as constants from '../constants';\nimport Column from '../types/Column';\n\ninterface FieldWrapperProps {\n  column: Column;\n  value: number | boolean | string | string[];\n  children: ReactNode;\n}\n\n/**\n * Form field wrapper for detail page\n * TODO When value is an array, how to render RefTableLink\n */\nconst FieldWrapperForDetailPage = ({\n  column,\n  value,\n  children,\n}: FieldWrapperProps) => {\n  const { dbName } = useContext(PageContext);\n  const typeClassName =\n    column.type === constants.STRING_ARRAY\n      ? 'dm-string-array-form-field'\n      : 'dm-string-form-field';\n  return (\n    <div\n      // key={column.id}\n      className={`dm-form-field ${typeClassName}`}\n      data-debug={JSON.stringify(column)}\n    >\n      <div className='dm-field-label'>\n        <b>\n          {column.name} (<code>{column.id}</code>)\n          {column.type === constants.STRING_ARRAY\n            ? ` (count:${value ? (value as string[]).length : 0})`\n            : null}\n        </b>\n        :{' '}\n        {column.referenceTable && typeof value === 'string' && (\n          <RefTableLink\n            dbName={dbName}\n            tables={dbs[dbName]}\n            value={value}\n            column={column}\n          />\n        )}\n      </div>\n      {children}\n    </div>\n  );\n};\n\nFieldWrapperForDetailPage.propTypes = {\n  column: columnType.isRequired,\n  value: PropTypes.oneOfType([\n    PropTypes.number,\n    PropTypes.bool,\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  children: PropTypes.node,\n};\nFieldWrapperForDetailPage.defaultProps = {\n  value: '',\n  children: null,\n};\n// FieldWrapperForDetailPage.contextType = PageContext;\n\nexport default FieldWrapperForDetailPage;\n"],"mappings":"AAAA,OAAOA,KAAK,IAAeC,UAAU,QAAQ,OAAO;AACpD,OAAOC,SAAS,MAAM,YAAY;AAElC,SAASC,GAAG,QAAQ,QAAQ;AAC5B,OAAOC,YAAY,MAAM,gBAAgB;AACzC,OAAOC,WAAW,MAAM,kBAAkB;AAE1C,SAASC,UAAU,QAAQ,SAAS;AACpC,OAAO,KAAKC,SAAS,MAAM,cAAc;AASzC;AACA;AACA;AACA;AACA,MAAMC,yBAAyB,GAAGA,CAAC;EACjCC,MAAM;EACNC,KAAK;EACLC;AACiB,CAAC,KAAK;EACvB,MAAM;IAAEC;EAAO,CAAC,GAAGX,UAAU,CAACI,WAAW,CAAC;EAC1C,MAAMQ,aAAa,GACjBJ,MAAM,CAACK,IAAI,KAAKP,SAAS,CAACQ,YAAY,GAClC,4BAA4B,GAC5B,sBAAsB;EAC5B,oBACEf,KAAA,CAAAgB,aAAA;IACE;IACAC,SAAS,EAAG,iBAAgBJ,aAAc,EAAE;IAC5C,cAAYK,IAAI,CAACC,SAAS,CAACV,MAAM;EAAE,gBAEnCT,KAAA,CAAAgB,aAAA;IAAKC,SAAS,EAAC;EAAgB,gBAC7BjB,KAAA,CAAAgB,aAAA,YACGP,MAAM,CAACW,IAAI,EAAC,IAAE,eAAApB,KAAA,CAAAgB,aAAA,eAAOP,MAAM,CAACY,EAAS,CAAC,KACvC,EAACZ,MAAM,CAACK,IAAI,KAAKP,SAAS,CAACQ,YAAY,GAClC,WAAUL,KAAK,GAAIA,KAAK,CAAcY,MAAM,GAAG,CAAE,GAAE,GACpD,IACH,CAAC,KACH,EAAC,GAAG,EACJb,MAAM,CAACc,cAAc,IAAI,OAAOb,KAAK,KAAK,QAAQ,iBACjDV,KAAA,CAAAgB,aAAA,CAACZ,YAAY;IACXQ,MAAM,EAAEA,MAAO;IACfY,MAAM,EAAErB,GAAG,CAACS,MAAM,CAAE;IACpBF,KAAK,EAAEA,KAAM;IACbD,MAAM,EAAEA;EAAO,CAChB,CAEA,CAAC,EACLE,QACE,CAAC;AAEV,CAAC;AAEDH,yBAAyB,CAACiB,SAAS,GAAG;EACpChB,MAAM,EAAEH,UAAU,CAACoB,UAAU;EAC7BhB,KAAK,EAAER,SAAS,CAACyB,SAAS,CAAC,CACzBzB,SAAS,CAAC0B,MAAM,EAChB1B,SAAS,CAAC2B,IAAI,EACd3B,SAAS,CAAC4B,MAAM,EAChB5B,SAAS,CAAC6B,OAAO,CAAC7B,SAAS,CAAC4B,MAAM,CAAC,CACpC,CAAC;EACFnB,QAAQ,EAAET,SAAS,CAAC8B;AACtB,CAAC;AACDxB,yBAAyB,CAACyB,YAAY,GAAG;EACvCvB,KAAK,EAAE,EAAE;EACTC,QAAQ,EAAE;AACZ,CAAC;AACD;;AAEA,eAAeH,yBAAyB"}