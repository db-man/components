{"version":3,"file":"RefTableLinks.js","names":["React","useContext","PropTypes","List","Link","PageContext","columnType","useAppContext","RefTableLinks","value","column","dbs","dbName","ids","Array","isArray","refTablePrimaryKey","find","db","name","referenceTable","columns","col","primary","id","createElement","className","size","dataSource","renderItem","Item","to","propTypes","oneOfType","string","arrayOf","isRequired"],"sources":["../../src/components/RefTableLinks.tsx"],"sourcesContent":["// @ts-nocheck\n\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'antd';\nimport { Link } from 'react-router-dom';\n\nimport PageContext from '../contexts/page';\nimport { columnType } from './types';\nimport { useAppContext } from '../contexts/AppContext';\n\nexport default function RefTableLinks({ value, column }) {\n  const { dbs } = useAppContext();\n  const { dbName } = useContext(PageContext);\n  // val can be \"123\" or [\"123\", \"456\"]\n  let ids = value;\n  if (!Array.isArray(value)) {\n    ids = [value];\n  }\n  const refTablePrimaryKey = dbs[dbName]\n    .find((db) => db.name === column.referenceTable)\n    .columns.find((col) => col.primary).id;\n  return (\n    <span className='ref-table'>\n      <List\n        size='small'\n        dataSource={ids}\n        renderItem={(id) => (\n          <List.Item>\n            <Link\n              to={`/${dbName}/${column.referenceTable}/get?${refTablePrimaryKey}=${id}`}\n            >\n              {id}\n            </Link>\n          </List.Item>\n        )}\n      />\n    </span>\n  );\n}\n\nRefTableLinks.propTypes = {\n  value: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]).isRequired,\n  column: columnType.isRequired,\n};\n"],"mappings":"AAAA;;AAEA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,IAAI,QAAQ,MAAM;AAC3B,SAASC,IAAI,QAAQ,kBAAkB;AAEvC,OAAOC,WAAW,MAAM,kBAAkB;AAC1C,SAASC,UAAU,QAAQ,SAAS;AACpC,SAASC,aAAa,QAAQ,wBAAwB;AAEtD,eAAe,SAASC,aAAaA,CAAC;EAAEC,KAAK;EAAEC;AAAO,CAAC,EAAE;EACvD,MAAM;IAAEC;EAAI,CAAC,GAAGJ,aAAa,CAAC,CAAC;EAC/B,MAAM;IAAEK;EAAO,CAAC,GAAGX,UAAU,CAACI,WAAW,CAAC;EAC1C;EACA,IAAIQ,GAAG,GAAGJ,KAAK;EACf,IAAI,CAACK,KAAK,CAACC,OAAO,CAACN,KAAK,CAAC,EAAE;IACzBI,GAAG,GAAG,CAACJ,KAAK,CAAC;EACf;EACA,MAAMO,kBAAkB,GAAGL,GAAG,CAACC,MAAM,CAAC,CACnCK,IAAI,CAAEC,EAAE,IAAKA,EAAE,CAACC,IAAI,KAAKT,MAAM,CAACU,cAAc,CAAC,CAC/CC,OAAO,CAACJ,IAAI,CAAEK,GAAG,IAAKA,GAAG,CAACC,OAAO,CAAC,CAACC,EAAE;EACxC,oBACExB,KAAA,CAAAyB,aAAA;IAAMC,SAAS,EAAC;EAAW,gBACzB1B,KAAA,CAAAyB,aAAA,CAACtB,IAAI;IACHwB,IAAI,EAAC,OAAO;IACZC,UAAU,EAAEf,GAAI;IAChBgB,UAAU,EAAGL,EAAE,iBACbxB,KAAA,CAAAyB,aAAA,CAACtB,IAAI,CAAC2B,IAAI,qBACR9B,KAAA,CAAAyB,aAAA,CAACrB,IAAI;MACH2B,EAAE,EAAG,IAAGnB,MAAO,IAAGF,MAAM,CAACU,cAAe,QAAOJ,kBAAmB,IAAGQ,EAAG;IAAE,GAEzEA,EACG,CACG;EACX,CACH,CACG,CAAC;AAEX;AAEAhB,aAAa,CAACwB,SAAS,GAAG;EACxBvB,KAAK,EAAEP,SAAS,CAAC+B,SAAS,CAAC,CACzB/B,SAAS,CAACgC,MAAM,EAChBhC,SAAS,CAACiC,OAAO,CAACjC,SAAS,CAACgC,MAAM,CAAC,CACpC,CAAC,CAACE,UAAU;EACb1B,MAAM,EAAEJ,UAAU,CAAC8B;AACrB,CAAC"}