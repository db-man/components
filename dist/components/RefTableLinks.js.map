{"version":3,"file":"RefTableLinks.js","names":["React","useContext","PropTypes","List","Link","dbs","PageContext","columnType","RefTableLinks","value","column","dbName","ids","Array","isArray","refTablePrimaryKey","find","db","name","referenceTable","columns","col","primary","id","createElement","className","size","dataSource","renderItem","Item","to","propTypes","oneOfType","string","arrayOf","isRequired"],"sources":["../../src/components/RefTableLinks.tsx"],"sourcesContent":["// @ts-nocheck\n\nimport React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { List } from 'antd';\nimport { Link } from 'react-router-dom';\n\nimport { dbs } from '../dbs';\nimport PageContext from '../contexts/page';\nimport { columnType } from './types';\n\nexport default function RefTableLinks({ value, column }) {\n  const { dbName } = useContext(PageContext);\n  // val can be \"123\" or [\"123\", \"456\"]\n  let ids = value;\n  if (!Array.isArray(value)) {\n    ids = [value];\n  }\n  const refTablePrimaryKey = dbs[dbName]\n    .find((db) => db.name === column.referenceTable)\n    .columns.find((col) => col.primary).id;\n  return (\n    <span className=\"ref-table\">\n      <List\n        size=\"small\"\n        dataSource={ids}\n        renderItem={(id) => (\n          <List.Item>\n            <Link\n              to={`/${dbName}/${column.referenceTable}/get?${refTablePrimaryKey}=${id}`}\n            >\n              {id}\n            </Link>\n          </List.Item>\n        )}\n      />\n    </span>\n  );\n}\n\nRefTableLinks.propTypes = {\n  value: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]).isRequired,\n  column: columnType.isRequired,\n};\n"],"mappings":"AAAA;;AAEA,OAAOA,KAAK,IAAIC,UAAU,QAAQ,OAAO;AACzC,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,IAAI,QAAQ,MAAM;AAC3B,SAASC,IAAI,QAAQ,kBAAkB;AAEvC,SAASC,GAAG,QAAQ,QAAQ;AAC5B,OAAOC,WAAW,MAAM,kBAAkB;AAC1C,SAASC,UAAU,QAAQ,SAAS;AAEpC,eAAe,SAASC,aAAaA,CAAC;EAAEC,KAAK;EAAEC;AAAO,CAAC,EAAE;EACvD,MAAM;IAAEC;EAAO,CAAC,GAAGV,UAAU,CAACK,WAAW,CAAC;EAC1C;EACA,IAAIM,GAAG,GAAGH,KAAK;EACf,IAAI,CAACI,KAAK,CAACC,OAAO,CAACL,KAAK,CAAC,EAAE;IACzBG,GAAG,GAAG,CAACH,KAAK,CAAC;EACf;EACA,MAAMM,kBAAkB,GAAGV,GAAG,CAACM,MAAM,CAAC,CACnCK,IAAI,CAAEC,EAAE,IAAKA,EAAE,CAACC,IAAI,KAAKR,MAAM,CAACS,cAAc,CAAC,CAC/CC,OAAO,CAACJ,IAAI,CAAEK,GAAG,IAAKA,GAAG,CAACC,OAAO,CAAC,CAACC,EAAE;EACxC,oBACEvB,KAAA,CAAAwB,aAAA;IAAMC,SAAS,EAAC;EAAW,gBACzBzB,KAAA,CAAAwB,aAAA,CAACrB,IAAI;IACHuB,IAAI,EAAC,OAAO;IACZC,UAAU,EAAEf,GAAI;IAChBgB,UAAU,EAAGL,EAAE,iBACbvB,KAAA,CAAAwB,aAAA,CAACrB,IAAI,CAAC0B,IAAI,qBACR7B,KAAA,CAAAwB,aAAA,CAACpB,IAAI;MACH0B,EAAE,EAAG,IAAGnB,MAAO,IAAGD,MAAM,CAACS,cAAe,QAAOJ,kBAAmB,IAAGQ,EAAG;IAAE,GAEzEA,EACG,CACG;EACX,CACH,CACG,CAAC;AAEX;AAEAf,aAAa,CAACuB,SAAS,GAAG;EACxBtB,KAAK,EAAEP,SAAS,CAAC8B,SAAS,CAAC,CAAC9B,SAAS,CAAC+B,MAAM,EAAE/B,SAAS,CAACgC,OAAO,CAAChC,SAAS,CAAC+B,MAAM,CAAC,CAAC,CAAC,CAACE,UAAU;EAC9FzB,MAAM,EAAEH,UAAU,CAAC4B;AACrB,CAAC"}